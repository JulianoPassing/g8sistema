<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pantaneiro 7</title>
    <link rel="icon" href="https://i.imgur.com/WveVVY5.png" type="image/png" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
    <script src="theme-toggle.js"></script>

    <style>
      :root {
        --primary-color: #2563eb;
        --primary-hover: #1d4ed8;
        --secondary-color: #64748b;
        --success-color: #059669;
        --success-hover: #047857;
        --danger-color: #dc2626;
        --danger-hover: #b91c1c;
        --warning-color: #d97706;
        --warning-hover: #b45309;
        --light-color: #f8fafc;
        --dark-color: #1e293b;
        --text-color: #334155;
        --text-muted: #64748b;
        --bg-color: #f1f5f9;
        --card-bg: #ffffff;
        --border-color: #e2e8f0;
        --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        --border-radius: 8px;
        --border-radius-lg: 12px;
        --border-radius-xl: 16px;
        --gradient-primary: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
        --gradient-success: linear-gradient(135deg, #059669 0%, #047857 100%);
        --gradient-danger: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
        --gradient-dark: linear-gradient(135deg, #1e293b 0%, #000000 100%);
        --gradient-bg: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        color: var(--text-color);
        background: var(--bg-color);
        margin: 0;
        padding: 80px 20px 0 20px;
        font-size: 14px;
        min-height: 100vh;
        position: relative;
        display: flex;
        flex-direction: column;
      }

      /* Fundo animado sutil */
      body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at 15% 25%, rgba(37, 99, 235, 0.05) 0%, transparent 50%),
                    radial-gradient(circle at 85% 75%, rgba(5, 150, 105, 0.05) 0%, transparent 50%);
        animation: backgroundFloat 20s ease-in-out infinite;
        z-index: -1;
      }

      @keyframes backgroundFloat {
        0%, 100% { transform: translateX(0) translateY(0); }
        50% { transform: translateX(5px) translateY(-10px); }
      }

      /* --- NOVO: HEADER DE USUÁRIO E LOGOUT (Importado do Painel) --- */
      .header-top {
        width: 100%;
        position: absolute;
        top: 0;
        left: 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 25px;
        background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
        box-shadow: var(--shadow);
        box-sizing: border-box;
        z-index: 1000; /* Garante que o header fique por cima */
        border-bottom: 1px solid var(--border-color);
        height: 55px;
      }

      .header-left {
        flex: 1;
      }

      .header-center {
        flex: 1;
        display: flex;
        justify-content: center;
      }

      .header-right {
        flex: 1;
        display: flex;
        justify-content: flex-end;
        align-items: center;
        gap: 12px;
      }
      #user-info {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        font-size: 0.9rem;
        color: var(--text-color);
        font-weight: 600;
        text-transform: capitalize;
        padding: 6px 12px;
        background: var(--light-color);
        border-radius: var(--border-radius);
        border: 1px solid var(--border-color);
      }
      #logout-button {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        background: var(--gradient-danger);
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: var(--border-radius);
        cursor: pointer;
        font-size: 0.85rem;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: var(--shadow-sm);
      }
      #logout-button:hover {
        background: var(--gradient-danger);
        transform: translateY(-1px);
        box-shadow: var(--shadow);
      }
      /* --- FIM DA SEÇÃO NOVA --- */

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      /* Caixa de rolagem para produtos */
      #produtos-container {
        max-height: 400px;
        overflow-y: auto;
        margin-bottom: 25px;
        border-radius: var(--border-radius-lg);
        box-shadow: var(--shadow);
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        padding: 12px 0;
        transition: all 0.3s ease;
      }

      #produtos-container:hover {
        box-shadow: var(--shadow-lg);
      }

      #logo {
        height: 35px;
        width: auto;
        transition: all 0.3s ease;
      }

      #logo:hover {
        transform: scale(1.05);
      }

      .card {
        background: var(--card-bg);
        border-radius: var(--border-radius-lg);
        box-shadow: var(--shadow);
        padding: 25px 20px;
        margin-bottom: 25px;
        border: 1px solid var(--border-color);
        transition: all 0.3s ease;
        animation: fadeIn 0.6s ease-out;
      }

      .card:hover {
        box-shadow: var(--shadow-lg);
        transform: translateY(-2px);
      }

      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }

      .card-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 2px solid var(--border-color);
      }

      .card-header h2 {
        font-size: 1.3rem;
        color: var(--dark-color);
        font-weight: 700;
        margin: 0;
      }

      .card-header span[role="img"] {
        font-size: 1.4rem;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
      }

      .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 16px;
      }

      .form-group {
        display: flex;
        flex-direction: column;
      }

      .form-group.full-width {
        grid-column: 1 / -1;
      }

      .form-group label {
        font-weight: 500;
        margin-bottom: 6px;
        color: var(--dark-color);
        font-size: 0.9rem;
      }

      .form-group label span {
        margin-right: 6px;
      }

      /* Oculta apenas o select de cliente, mantendo funcionalidade */
      #cliente-selecionado {
        display: none !important;
      }

      input[type="text"],
      input[type="number"],
      input[type="email"],
      select,
      textarea {
        width: 100%;
        padding: 10px 12px;
        border: 2px solid var(--border-color);
        border-radius: var(--border-radius);
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        font-size: 0.9rem;
        transition: all 0.3s ease;
        background: var(--card-bg);
        color: var(--text-color);
      }

      input:focus,
      select:focus,
      textarea:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        transform: translateY(-1px);
      }

      input::placeholder,
      textarea::placeholder {
        color: var(--text-muted);
        font-weight: 400;
      }

      textarea {
        resize: vertical;
        min-height: 70px;
      }

      .table-responsive {
        width: 100%;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
      }

      th,
      td {
        padding: 10px 12px;
        text-align: left;
        border-bottom: 1px solid var(--border-color);
        vertical-align: middle;
        font-size: 0.9rem;
      }

      thead th {
        background-color: var(--light-color);
        font-weight: 600;
        color: var(--dark-color);
        white-space: nowrap;
      }

      tbody tr:hover {
        background-color: #f5f5f5;
      }

      .tamanho-input-container {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        align-items: center;
      }

      .tamanho-input-container > div {
        display: flex;
        align-items: center;
        gap: 4px;
      }

      .tamanho-input-container label {
        font-size: 0.75em;
        font-weight: 500;
      }

      .tamanho-input-container input[type="number"] {
        width: 45px;
        padding: 4px;
        text-align: center;
      }

      .manual-tamanho-input {
        width: 140px;
      }

      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        padding: 8px 16px;
        border-radius: var(--border-radius);
        border: none;
        font-family: "Poppins", sans-serif;
        font-weight: 500;
        font-size: 0.9em;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
      }

      .btn-primary {
        background-color: var(--primary-color);
        color: white;
      }
      .btn-primary:hover {
        background-color: var(--primary-hover);
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 123, 255, 0.2);
      }

      .btn-success {
        background-color: var(--success-color);
        color: white;
      }
      .btn-success:hover {
        background-color: var(--success-hover);
      }

      .btn-danger {
        background-color: var(--danger-color);
        color: white;
        padding: 5px 10px;
        font-size: 0.85em;
      }
      .btn-danger:hover {
        background-color: var(--danger-hover);
      }

      #gerar-pedido-btn {
        width: 100%;
        padding: 12px 20px;
        font-size: 1rem;
        font-weight: 600;
        margin-top: 20px;
      }

      .pedido-item {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        align-items: center;
        padding: 15px;
        background-color: var(--light-color);
        border: 1px solid var(--border-color);
        border-radius: var(--border-radius);
        margin-bottom: 10px;
        gap: 15px;
      }
      .pedido-item-info {
        flex-grow: 1;
      }
      .pedido-item-info strong {
        color: var(--dark-color);
        font-weight: 600;
      }

      #pedido-vazio {
        text-align: center;
        padding: 30px;
        background: var(--light-color);
        border: 2px dashed var(--border-color);
        border-radius: var(--border-radius);
        color: var(--secondary-color);
      }

      .descontos-container {
        display: flex;
        flex-wrap: wrap;
        gap: 16px;
        margin-top: 20px;
        margin-bottom: 20px;
        padding: 15px;
        background: var(--light-color);
        border-radius: var(--border-radius);
        border: 1px solid var(--border-color);
      }

      .desconto-linha {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .desconto-linha label {
        font-weight: 500;
        color: var(--dark-color);
        font-size: 0.9rem;
      }

      .desconto-linha select {
        padding: 6px 10px;
        border: 1px solid var(--border-color);
        border-radius: var(--border-radius);
        font-size: 0.9rem;
        min-width: 80px;
      }

      .total-container {
        text-align: center;
        margin: 20px 0;
        padding: 15px;
        background: var(--light-color);
        border-radius: var(--border-radius);
        border: 2px solid var(--border-color);
      }

      .total-container h3 {
        margin: 0;
        font-size: 1.2rem;
        color: var(--dark-color);
        font-weight: 700;
      }

      #gerar-pedido-btn {
        width: 100%;
        padding: 12px 20px;
        font-size: 1rem;
        font-weight: 600;
        margin-top: 20px;
      }

      #total-pedido {
        color: var(--success-color);
      }

      @media (max-width: 768px) {
        body {
          padding: 90px 10px 10px 10px; /* Ajuste para mobile */
        }
        .card {
          padding: 15px;
        }
        .card-header h2 {
          font-size: 1.2em;
        }
        th,
        td {
          padding: 8px 10px;
          font-size: 0.9em;
        }
        .header-top {
          padding: 10px 15px;
          gap: 10px;
        }
        #user-info {
          font-size: 0.9rem;
        }
      }

      #sugestoes-clientes {
        position: absolute;
        left: 0;
        right: 0;
        top: 100%;
        background: #fff;
        border: 1px solid #d1d5db;
        border-radius: 8px;
        box-shadow: 0 4px 16px rgba(0,0,0,0.13);
        width: 100%;
        max-height: 220px;
        overflow-y: auto;
        z-index: 1001;
        margin-top: 2px;
        padding: 0;
        display: none;
      }
      .sugestao-cliente-item {
        padding: 10px 16px;
        cursor: pointer;
        font-size: 1em;
        background: #fff;
        border-bottom: 1px solid #f0f0f0;
        transition: background 0.18s;
        color: #222;
        line-height: 1.3;
        display: block;
      }
      .sugestao-cliente-item:last-child {
        border-bottom: none;
      }
      .sugestao-cliente-item:hover {
        background: #f3f7fa;
        color: #007bff;
      }
      #busca-cliente {
        width: 100%;
        box-sizing: border-box;
        border-radius: 8px;
        border: 1px solid #d1d5db;
        padding: 10px 12px;
        font-size: 1em;
        margin-bottom: 6px;
      }
      .form-group {
        position: relative;
      }

      footer {
        width: 100vw;
        text-align: center;
        padding: 15px 0;
        background: #1e3a5f;
        color: white;
        font-size: 0.85rem;
        position: relative;
        left: 50%;
        transform: translateX(-50%);
        font-weight: 500;
      }
      footer a {
        color: #60a5fa;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s ease;
      }
      footer a:hover {
        color: #93c5fd;
        text-decoration: underline;
      }
    </style>
      <link rel="stylesheet" href="mobile.css">
  <script src="mobile-menu.js"></script>
    </head>
  <body>
    <header class="header-top">
      <div class="header-left"></div>
      <div class="header-center">
        <img
          id="logo"
          src="https://i.imgur.com/vjq26ym.png"
          alt="Logo G8 Pantaneiro"
        />
      </div>
      <div class="header-right">
        <div id="user-info"></div>
        <button id="logout-button">Sair</button>
        <a
          href="painel.html"
          class="btn"
          style="height: 35px; background-color: black; color: white"
        >
          ⬅️ Voltar ao Painel
        </a>
      </div>
    </header>

    <main class="container">
      <section class="card">
        <div class="card-header">
          <span
            role="img"
            aria-label="Gerenciar Cliente"
            style="font-size: 1.8em"
            >👤</span
          >
          <h2>Gerenciar Cliente - Tabela 7</h2>
        </div>
        <div class="form-group">
          <input type="text" id="busca-cliente" placeholder="Buscar cliente..." style="margin-bottom: 10px;" />
          <div id="sugestoes-clientes" style="position: relative; z-index: 10;"></div>
          <select id="cliente-selecionado">
            <option value="">- Selecione um cliente -</option>
            <option value="novo">- Inserir manualmente -</option>
          </select>
        </div>
      </section>
      <section class="card">
        <div class="card-header">
          <span
            role="img"
            aria-label="Informações do Cliente"
            style="font-size: 1.8em"
            >📋</span
          >
          <h2>Informações do Cliente - Tabela 7</h2>
        </div>
        <div class="form-grid">
          <div class="form-group">
            <label for="razao"><span>🏢</span>Razão Social:</label>
            <input type="text" id="razao" />
          </div>
          <div class="form-group">
            <label for="cnpj"><span>🏭</span>CNPJ:</label>
            <input type="text" id="cnpj" />
          </div>
          <div class="form-group">
            <label for="ie"><span>📝</span>I.E:</label>
            <input type="text" id="ie" />
          </div>
          <div class="form-group">
            <label for="endereco"><span>🗺️</span>Endereço:</label>
            <input type="text" id="endereco" />
          </div>
          <div class="form-group">
            <label for="bairro"><span>🏘️</span>Bairro:</label>
            <input type="text" id="bairro" />
          </div>
          <div class="form-group">
            <label for="cidade"><span>🏙️</span>Cidade:</label>
            <input type="text" id="cidade" />
          </div>
          <div class="form-group">
            <label for="estado"><span>🌎</span>Estado:</label>
            <input type="text" id="estado" />
          </div>
          <div class="form-group">
            <label for="cep"><span>📫</span>CEP:</label>
            <input type="text" id="cep" />
          </div>
          <div class="form-group">
            <label for="email"><span>📧</span>E-mail:</label>
            <input type="email" id="email" />
          </div>
          <div class="form-group">
            <label for="telefone"><span>📞</span>Telefone:</label>
            <input type="text" id="telefone" />
          </div>
          <div class="form-group">
            <label for="transporte"><span>🚚</span>Transporte: <span style="color: red">*</span></label>
            <input type="text" id="transporte" required />
          </div>
          <div class="form-group">
            <label for="prazo"><span>💰</span>Prazo Pagamento: <span style="color: red">*</span></label>
            <input type="text" id="prazo" placeholder="Ex: 30/60/90" required />
          </div>
          <div class="form-group full-width">
            <label for="obs"><span>💬</span>Observações: <span style="color: red">*</span></label>
            <textarea id="obs" rows="3" required></textarea>
          </div>
        </div>
      </section>
      <div class="card">
        <div class="form-group">
          <input type="text" id="busca-produto" placeholder="Buscar produto por referência ou descrição..." style="margin-bottom: 10px;" />
          <div id="sugestoes-produtos" style="position: relative; z-index: 10;"></div>
        </div>
      </div>
      <div id="produtos-container"></div>
      <section class="card">
        <div class="card-header">
          <span role="img" aria-label="Seu Pedido" style="font-size: 1.8em"
            >🛒</span
          >
          <h2>Seu Pedido</h2>
        </div>
        <div id="pedido-container">
          <p id="pedido-vazio">Nenhum item adicionado ao pedido ainda.</p>
        </div>
        <div class="descontos-container">
          <div class="desconto-linha">
            <label for="desconto-prazo"
              ><span>⏳</span>Desconto Prazo (%):</label
            >
            <select
              id="desconto-prazo"
              onchange="aplicarDescontoPrazo(parseFloat(this.value))"
            >
              <option value="0" selected>0%</option>
              <option value="1.2">1,2%</option>
              <option value="2.5">2,5%</option>
              <option value="5">5%</option>
            </select>
          </div>
          <div class="desconto-linha">
            <label for="desconto-volume"
              ><span>📦</span>Desconto Volume (%):</label
            >
            <select
              id="desconto-volume"
              onchange="aplicarDescontoVolume(parseFloat(this.value))"
            >
              <option value="0" selected>0%</option>
              <option value="2">2%</option>
              <option value="4">4%</option>
              <option value="6">6%</option>
              <option value="8">8%</option>
              <option value="10">10%</option>
            </select>
          </div>
        </div>
        <div class="total-container">
          <h3>💰 Total do Pedido: R$ <span id="total-pedido">0.00</span></h3>
        </div>
        <button id="gerar-pedido-btn" class="btn btn-primary">
          🖨️ Gerar Pedido em PDF
        </button>
        <div id="status-mensagem"></div>
      </section>
    </main>
    <footer style="width: 100vw; text-align: center; padding: 15px 0; background: #1e3a5f; color: white; font-size: 0.85rem; margin-top: auto; border-top: 1px solid var(--border-color); font-weight: 500; position: relative; left: 50%; transform: translateX(-50%);">
      © 2025 J.P. Sistemas. Todos os direitos reservados. | <a href="https://whatsa.me/5548996852138/?t=Ol%C3%A1,%20gostaria%20de%20mais%20informa%C3%A7%C3%B5es%20sobre%20os%20sistemas." target="_blank" style="color: #60a5fa; text-decoration: none; font-weight: 600; transition: all 0.3s ease;">jp-sistemas.com</a>
    </footer>
    <script>
// ========== INÍCIO DA LISTA DE PRODUTOS ATUALIZADA ==========
window.produtosData = [
  {
    CATEGORIA: "Aventura",
    REFERENCIA: "201",
    DESCRIÇÃO: "JARDINEIRA PVC COM BOTA",
    TAMANHOS: ["P - EX / BOTAS 35 - 46"],
    PRECO: 140.63,
  },
  {
    CATEGORIA: "Aventura",
    REFERENCIA: "203",
    DESCRIÇÃO: "PERNEIRA PVC VIRILHA COM BOTA",
    TAMANHOS: ["ÚNICO / BOTAS 35 - 46"],
    PRECO: 108.84,
  },
  {
    CATEGORIA: "Aventura",
    REFERENCIA: "204",
    DESCRIÇÃO: "PERNEIRA PVC JOELHO COM BOTA",
    TAMANHOS: ["ÚNICO / BOTAS 35 - 46"],
    PRECO: 95.96,
  },
  {
    CATEGORIA: "Aventura",
    REFERENCIA: "209",
    DESCRIÇÃO: "JAQUETA PVC PESCADOR",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 44.32,
  },
  {
    CATEGORIA: "Aventura",
    REFERENCIA: "210",
    DESCRIÇÃO: "CALÇA PVC PESCADOR",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 30.87,
  },
  {
    CATEGORIA: "Aventura",
    REFERENCIA: "213",
    DESCRIÇÃO: "JAQUETA NYLON PESCADOR",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 74.18,
  },
  {
    CATEGORIA: "Aventura",
    REFERENCIA: "214",
    DESCRIÇÃO: "CALÇA NYLON PESCADOR",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 50.02,
  },
  {
    CATEGORIA: "Aventura",
    REFERENCIA: "234",
    DESCRIÇÃO: "CONJUNTO PVC PESCADOR COM CAPUZ",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 67.77,
  },
  {
    CATEGORIA: "Aventura",
    REFERENCIA: "238",
    DESCRIÇÃO: "CONJUNTO NYLON PESCADOR COM CAPUZ",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 124.75,
  },
  {
    CATEGORIA: "PRO",
    REFERENCIA: "222",
    DESCRIÇÃO: "CAPA LONGA PVC COM CAPUZ LAPA SIMPLES COM VELCRO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 51.69,
  },
  {
    CATEGORIA: "PRO",
    REFERENCIA: "222.1",
    DESCRIÇÃO: "CAPA LONGA PVC COM CAPUZ LAPA INTERNA",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 49.93,
  },
  {
    CATEGORIA: "PRO",
    REFERENCIA: "225",
    DESCRIÇÃO: "CAPA LONGA NYLON PADRÃO ELÁSTICO NOS PUNHOS",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 107.41,
  },
  {
    CATEGORIA: "PRO",
    REFERENCIA: "225.1",
    DESCRIÇÃO: "CAPA LONGA NYLON CAPUZ LAPA INTERNA",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 103.17,
  },
  {
    CATEGORIA: "PRO",
    REFERENCIA: "225FT900",
    DESCRIÇÃO: "CAPA LONGA NYLON PADRÃO COM REFLETIVOS",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 137.04,
  },
  {
    CATEGORIA: "PRO",
    REFERENCIA: "225FT900.2",
    DESCRIÇÃO:
      "CAPA LONGA NYLON PADRÃO COM REFLETIVOS E ABERT. VENTILAÇÃO FRENTE E COSTAS",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 137.04,
  },
  {
    CATEGORIA: "PRO",
    REFERENCIA: "510",
    DESCRIÇÃO: "JAQUETA NYLON PARA FRIO COM ELÁSTICO NA CINTURA",
    TAMANHOS: ["P", "M", "G", "GG", "EX"],
    PRECO: 149.25,
  },
  {
    CATEGORIA: "PRO",
    REFERENCIA: "511",
    DESCRIÇÃO: "JAQUETA NYLON PARA FRIO - MOD. PARKA",
    TAMANHOS: ["P", "M", "G", "GG", "EX"],
    PRECO: 144.39,
  },
  {
    CATEGORIA: "PRO",
    REFERENCIA: "521",
    DESCRIÇÃO: "JAQUETA NYLON PARA FRIO COM CAPUZ REMOVIVEL - MOD. PARKA",
    TAMANHOS: ["P", "M", "G", "GG", "EX"],
    PRECO: 162.75,
  },
  {
    CATEGORIA: "PRO",
    REFERENCIA: "530",
    DESCRIÇÃO: "JAQUETA NYLON PARA FRIO - MANGAS REMOVÍVEIS",
    TAMANHOS: ["P", "M", "G", "GG", "EX"],
    PRECO: 175.56,
  },
  {
    CATEGORIA: "PRO",
    REFERENCIA: "550",
    DESCRIÇÃO: "JAQUETA NYLON FEMININO PARA FRIO",
    TAMANHOS: ["P", "M", "G", "GG", "EX"],
    PRECO: 121.63,
  },
  {
    CATEGORIA: "PRO",
    REFERENCIA: "551",
    DESCRIÇÃO: "JAQUETA NYLON FEMININO PARA FRIO COM CAPUZ FIXO",
    TAMANHOS: ["P", "M", "G", "GG", "EX"],
    PRECO: 135.09,
  },
  {
    CATEGORIA: "PRO",
    REFERENCIA: "670",
    DESCRIÇÃO: "CONJUNTO NYLON COM REFLETIVO - MODELO SEGURANÇA",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 157.03,
  },
  {
    CATEGORIA: "PRO",
    REFERENCIA: "670FT900.1",
    DESCRIÇÃO:
      "CONJUNTO NYLON CAPUZ COM ABERTURA DE VENTILAÇÃO FRENTE E COSTAS",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 161.49,
  },
  {
    CATEGORIA: "PRO",
    REFERENCIA: "670J",
    DESCRIÇÃO: "JAQUETA NYLON - MODELO SEGURANÇA",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 99.56,
  },
  {
    CATEGORIA: "PRO",
    REFERENCIA: "670C",
    DESCRIÇÃO: "CALÇA NYLON - MODELO SEGURANÇA",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 60.07,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "700",
    DESCRIÇÃO: "CONJUNTO NYLON GOLA ECONÔMICO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 117.57,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "701",
    DESCRIÇÃO: "CONJUNTO NYLON COM CAPUZ ECONÔMICO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 118.44,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "800",
    DESCRIÇÃO: "CONJUNTO NYLON GOLA COM ABERTURA TRASEIRA PARA MOCHILA",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 181.15,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "801",
    DESCRIÇÃO: "CONJUNTO NYLON CAPUZ COM ABERTURA TRASEIRA PARA MOCHILA",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 182.17,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1000",
    DESCRIÇÃO: "CONJUNTO NYLON COM GOLA",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 127.47,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1001",
    DESCRIÇÃO: "CONJUNTO NYLON COM CAPUZ",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 129.20,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1002",
    DESCRIÇÃO: "JAQUETA NYLON COM GOLA",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 76.17,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1003",
    DESCRIÇÃO: "JAQUETA NYLON COM CAPUZ",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 78.58,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1004",
    DESCRIÇÃO: "CALÇA NYLON",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 54.74,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1100",
    DESCRIÇÃO: "CONJUNTO NYLON FEMININO COM GOLA - PRETO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 127.59,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1100C",
    DESCRIÇÃO: "CONJUNTO NYLON FEMININO COM GOLA - CORES",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 127.59,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1100PC",
    DESCRIÇÃO: "CONJUNTO NYLON FEMININO COM GOLA - PRETO COM CORES",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 134.18,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1101",
    DESCRIÇÃO: "CONJUNTO NYLON FEMININO COM CAPUZ - PRETO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 134.53,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1101C",
    DESCRIÇÃO: "CONJUNTO NYLON FEMININO COM CAPUZ - CORES",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 134.53,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1101PC",
    DESCRIÇÃO: "CONJUNTO NYLON FEMININO COM CAPUZ - PRETO COM CORES",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 144.09,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1102",
    DESCRIÇÃO: "JAQUETA NYLON FEMININA COM GOLA",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 75.79,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1103",
    DESCRIÇÃO: "JAQUETA NYLON FEMININA COM CAPUZ",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 81.20,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1104",
    DESCRIÇÃO: "CALÇA NYLON FEMININA",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 51.50,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1200",
    DESCRIÇÃO: "CONJUNTO NYLON LUXO COM FORRO E GOLA",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 149.97,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1201",
    DESCRIÇÃO: "CONJUNTO NYLON LUXO COM FORRO E CAPUZ",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 153.91,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1202",
    DESCRIÇÃO: "JAQUETA NYLON LUXO COM FORRO E GOLA",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 97.44,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1203",
    DESCRIÇÃO: "JAQUETA NYLON LUXO COM FORRO E CAPUZ",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 102.49,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1204",
    DESCRIÇÃO: "CALÇA NYLON LUXO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 56.17,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1600",
    DESCRIÇÃO: "CONJUNTO 1000 + POLÂINA + MOCHILA",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 146.38,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1700",
    DESCRIÇÃO: "CONJUNTO 1100 FEMININO + POLÂINA + MOCHILA",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 152.22,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1700PC",
    DESCRIÇÃO: "CONJUNTO 1100 FEMININO + POLÂINA + MOCHILA PRETO COM CORES",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 154.98,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1800",
    DESCRIÇÃO: "CONJUNTO 1200 + POLÂINA + MOCHILA",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 174.42,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1900",
    DESCRIÇÃO: "CONJUNTO NYLON LUXO FEMININO COM FORRO E GOLA - PRETO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 155.29,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1900C",
    DESCRIÇÃO: "CONJUNTO NYLON LUXO FEMININO COM FORRO E GOLA - CORES",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 155.29,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1900PC",
    DESCRIÇÃO:
      "CONJUNTO NYLON LUXO FEMININO COM FORRO E GOLA - PRETO COM CORES",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 161.88,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1901",
    DESCRIÇÃO: "CONJUNTO NYLON LUXO FEMININO COM FORRO E CAPUZ - PRETO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 164.24,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1901C",
    DESCRIÇÃO: "CONJUNTO NYLON LUXO FEMININO COM FORRO E CAPUZ - CORES",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 164.24,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "1901PC",
    DESCRIÇÃO:
      "CONJUNTO NYLON LUXO FEMININO COM FORRO E CAPUZ - PRETO COM CORES",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 173.90,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "2000",
    DESCRIÇÃO: "CONJUNTO PVC PREMIUM COM GOLA, BOLSO E REFLETIVO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 95.75,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "2001",
    DESCRIÇÃO: "CONJUNTO PVC PREMIUM COM CAPUZ, BOLSO E REFLETIVO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 98.03,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "2002",
    DESCRIÇÃO: "JAQUETA PVC PREMIUM COM GOLA, BOLSO E REFLETIVO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 55.32,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "2003",
    DESCRIÇÃO: "JAQUETA PVC PREMIUM COM CAPUZ, BOLSO E REFLETIVO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 56.89,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "2004",
    DESCRIÇÃO: "CALÇA PVC PREMIUM COM BOLSO E REFLETIVO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 40.53,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "2300",
    DESCRIÇÃO: "CONJUNTO PVC ECONOMICA COM GOLA",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 61.75,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "2301",
    DESCRIÇÃO: "CONJUNTO PVC ECONOMICA COM CAPUZ",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 64.22,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "2350",
    DESCRIÇÃO: "CONJUNTO PVC ECONOMICA COM GOLA E BOLSO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 63.35,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "2351",
    DESCRIÇÃO: "CONJUNTO PVC ECONOMICA COM CAPUZ E BOLSO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 65.82,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "2600",
    DESCRIÇÃO: "CONJUNTO PVC INFANTIL COM GOLA",
    TAMANHOS: ["ÚNICO"],
    PRECO: 52.64,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "2601",
    DESCRIÇÃO: "CONJUNTO PVC INFANTIL COM CAPUZ",
    TAMANHOS: ["ÚNICO"],
    PRECO: 54.05,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "2700",
    DESCRIÇÃO: "CONJUNTO PVC TORNADO COM GOLA",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 66.64,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "2701",
    DESCRIÇÃO: "CONJUNTO PVC TORNADO COM CAPUZ",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 70.94,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "2702",
    DESCRIÇÃO: "JAQUETA PVC TORNADO COM GOLA",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 38.12,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "2703",
    DESCRIÇÃO: "JAQUETA PVC TORNADO COM CAPUZ",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 40.9,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "2704",
    DESCRIÇÃO: "CALÇA PVC TORNADO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 31.24,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "2900",
    DESCRIÇÃO: "CONJUNTO PVC TORNADO COM GOLA E BOLSO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 68.23,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "2901",
    DESCRIÇÃO: "CONJUNTO PVC TORNADO COM CAPUZ E BOLSO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 72.53,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "2902",
    DESCRIÇÃO: "JAQUETA PVC TORNADO COM GOLA E BOLSO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 39.69,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "2903",
    DESCRIÇÃO: "JAQUETA PVC TORNADO COM CAPUZ E BOLSO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 42.41,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "2904",
    DESCRIÇÃO: "CALÇA PVC TORNADO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 31.24,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "3000",
    DESCRIÇÃO: "CONJUNTO PVC FEMININO COM GOLA - PRETO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 70.38,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "3000PC",
    DESCRIÇÃO: "CONJUNTO PVC FEMININO COM GOLA - PRETO COM CORES",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 73.46,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "3001",
    DESCRIÇÃO: "CONJUNTO PVC FEMININO COM CAPUZ - PRETO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 74.63,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "3001PC",
    DESCRIÇÃO: "CONJUNTO PVC FEMININO COM CAPUZ - PRETO COM CORES",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 78.63,
  },
  {
    CATEGORIA: "Urbano",
    REFERENCIA: "4000",
    DESCRIÇÃO: "CONJUNTO PVC INVERNO COM GOLA",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 130.07,
  },
  {
    CATEGORIA: "Acessórios",
    REFERENCIA: "360",
    DESCRIÇÃO: "BOTA DE PVC IMPERMEÁVEL - PRETA",
    TAMANHOS: ["35/36", "37/38", "39/40", "41/42", "43/44"],
    PRECO: 65.42,
  },
  {
    CATEGORIA: "Acessórios",
    REFERENCIA: "360C",
    DESCRIÇÃO: "BOTA DE PVC IMPERMEÁVEL - CORES",
    TAMANHOS: ["35/36", "37/38", "39/40", "41/42", "43/44"],
    PRECO: 75.89,
  },
  {
    CATEGORIA: "Acessórios",
    REFERENCIA: "370",
    DESCRIÇÃO: "BOTA DE PVC IMPERMEÁVEL CANO MÉDIO",
    TAMANHOS: ["35/36", "37/38", "39/40", "41/42", "43/44", "45/46"],
    PRECO: 74.64,
  },
  {
    CATEGORIA: "Acessórios",
    REFERENCIA: "380",
    DESCRIÇÃO: "BOTA DE COURO CANO CURTO COM ZÍPER - CITY",
    TAMANHOS: ["37", "38", "39", "40", "41", "42", "43", "44", "45"],
    PRECO: 427.59,
  },
  {
    CATEGORIA: "Acessórios",
    REFERENCIA: "390",
    DESCRIÇÃO: "BOTA DE COURO CANO CURTO COM VELCRO E ELÁSTICO - SPEED",
    TAMANHOS: ["37", "38", "39", "40", "41", "42", "43", "44", "45"],
    PRECO: 474.32,
  },
  {
    CATEGORIA: "Acessórios",
    REFERENCIA: "400",
    DESCRIÇÃO: "BOTA DE COURO CANO ALTO COM ZÍPER E IMPERMEÁVEL - DRY",
    TAMANHOS: ["37", "38", "39", "40", "41", "42", "43", "44", "45"],
    PRECO: 686.12,
  },
  {
    CATEGORIA: "Acessórios",
    REFERENCIA: "2410",
    DESCRIÇÃO: "CAPA DE MOTO PVC FORRADA COM FELTRO - PEQUENA",
    TAMANHOS: ["ATÉ 125 CILINDRADAS"],
    PRECO: 96.81,
  },
  {
    CATEGORIA: "Acessórios",
    REFERENCIA: "2411",
    DESCRIÇÃO: "CAPA DE MOTO PVC FORRADA COM FELTRO - MÉDIA",
    TAMANHOS: ["125 - 150 CILINDRADAS"],
    PRECO: 100.03,
  },
  {
    CATEGORIA: "Acessórios",
    REFERENCIA: "2412",
    DESCRIÇÃO: "CAPA DE MOTO PVC FORRADA COM FELTRO - GRANDE",
    TAMANHOS: ["250 - 450 CILINDRADAS"],
    PRECO: 103.16,
  },
  {
    CATEGORIA: "Acessórios",
    REFERENCIA: "2413",
    DESCRIÇÃO: "CAPA DE MOTO PVC FORRADA COM FELTRO - GRANDE GRANDE",
    TAMANHOS: ["450 - 500 - 750 CILINDRADAS"],
    PRECO: 108.78,
  },
  {
    CATEGORIA: "Acessórios",
    REFERENCIA: "2414",
    DESCRIÇÃO: "CAPA DE MOTO PVC FORRADA COM FELTRO - EXTRA GRANDE",
    TAMANHOS: ["750 - 1200 CILINDRADAS"],
    PRECO: 115.15,
  },
  {
    CATEGORIA: "Acessórios",
    REFERENCIA: "2415",
    DESCRIÇÃO:
      "CAPA DE MOTO PVC FORRADA COM FELTRO - EXTRA GRANDE GRANDE",
    TAMANHOS: ["ACIMA DE 1.200 CILINDRADAS"],
    PRECO: 140.08,
  },
  {
    CATEGORIA: "Acessórios",
    REFERENCIA: "2421.1",
    DESCRIÇÃO: "POLAINA PVC PREMIUM COM MEIA SOLA VELCRO",
    TAMANHOS: ["P", "M", "G"],
    PRECO: 17.60,
  },
  {
    CATEGORIA: "Acessórios",
    REFERENCIA: "2422.1",
    DESCRIÇÃO: "POLAINA PVC PREMIUM COM SOLA, ZÍPER E VELCRO",
    TAMANHOS: ["P", "M", "G"],
    PRECO: 20.09,
  },
  {
    CATEGORIA: "Acessórios",
    REFERENCIA: "2424",
    DESCRIÇÃO: "MOCHILA NYLON",
    TAMANHOS: ["ÚNICO"],
    PRECO: 9.84,
  },
  {
    CATEGORIA: "Acessórios",
    REFERENCIA: "2428",
    DESCRIÇÃO: "CAPA PARA MOCHILA",
    TAMANHOS: ["ÚNICO"],
    PRECO: 27.46,
  },
  {
    CATEGORIA: "Estilo",
    REFERENCIA: "1008",
    DESCRIÇÃO: "MACACÃO DE NYLON - MOD. ESTILO",
    TAMANHOS: ["P", "M", "G", "GG", "EX", "EXG"],
    PRECO: 208.50,
  },
  {
    CATEGORIA: "Estilo",
    REFERENCIA: "1008PC",
    DESCRIÇÃO: "MACACÃO DE NYLON - PRETO COM CORES - MOD. ESTILO",
    TAMANHOS: ["P", "M", "G", "GG", "EX", "EXG"],
    PRECO: 223.40,
  },
  {
    CATEGORIA: "Estilo",
    REFERENCIA: "1300",
    DESCRIÇÃO: "CONJUNTO NYLON LUXO GOLA VENTILAÇÃO COSTAS FORRADO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 180.22,
  },
  {
    CATEGORIA: "Estilo",
    REFERENCIA: "1300C",
    DESCRIÇÃO:
      "CONJUNTO NYLON LUXO GOLA VENTILAÇÃO COSTAS FORRADO - CORES",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 183.09,
  },
  {
    CATEGORIA: "Estilo",
    REFERENCIA: "1350",
    DESCRIÇÃO: "CONJUNTO NYLON LUXO GOLA VENTILAÇÃO COSTAS SEM FORRO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 162.84,
  },
  {
    CATEGORIA: "Estilo",
    REFERENCIA: "1350C",
    DESCRIÇÃO:
      "CONJUNTO NYLON LUXO GOLA VENTILAÇÃO COSTAS SEM FORRO - CORES",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 164.66,
  },
  {
    CATEGORIA: "Estilo",
    REFERENCIA: "1400",
    DESCRIÇÃO: "CONJUNTO DE NYLON COM FORRO MASCULINO - MOD.ESTILO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 186.58,
  },
  {
    CATEGORIA: "Estilo",
    REFERENCIA: "1400PC",
    DESCRIÇÃO:
      "CONJUNTO DE NYLON COM FORRO MASCULINO - MOD.ESTILO - VIVO COLORIDO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 183.98,
  },
  {
    CATEGORIA: "Estilo",
    REFERENCIA: "1500",
    DESCRIÇÃO: "CONJUNTO DE NYLON COM FORRO FEMININO - MOD. ESTILO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 183.46,
  },
  {
    CATEGORIA: "Estilo",
    REFERENCIA: "1500PC",
    DESCRIÇÃO:
      "CONJUNTO DE NYLON COM FORRO FEMININO - MOD. ESTILO - VIVO COLORIDO",
    TAMANHOS: [
      "PP",
      "P",
      "M",
      "G",
      "GG",
      "EX",
      "EXG",
      "2G",
      "3G",
      "4G",
      "5G",
    ],
    PRECO: 179.87,
  },
];
// ========== FIM DA LISTA DE PRODUTOS ATUALIZADA ==========

      // Script para carregar dados dos clientes da API
      let clientesCadastrados = [];

      async function carregarClientes() {
        try {
          const response = await fetch('/api/clientes');
          if (!response.ok) throw new Error('Erro ao buscar clientes da API');
          const data = await response.json();
          clientesCadastrados = data;
          // Aqui você pode chamar funções para popular selects, etc.
        } catch (error) {
          console.error('Erro ao carregar clientes da API:', error);
          // Fallback para o arquivo JSON se a API falhar
          try {
            const response = await fetch('clientes.json');
            if (!response.ok) throw new Error('Erro ao buscar clientes.json');
            const data = await response.json();
            clientesCadastrados = data;
          } catch (fallbackError) {
            alert('Erro ao carregar os dados dos clientes. Verifique se a API está disponível.');
          }
        }
      }

      // ... O resto das variáveis permanecem as mesmas
      window.pedidoItens = [];
      let subtotalPedido = 0;
      let descontoPrazoPercentual = 0;
      let descontoVolumePercentual = 0;
      let totalPedidoComDesconto = 0;
      const selectCliente = document.getElementById("cliente-selecionado");
      const inputsCliente = {
        razao: document.getElementById("razao"),
        cnpj: document.getElementById("cnpj"),
        ie: document.getElementById("ie"),
        endereco: document.getElementById("endereco"),
        bairro: document.getElementById("bairro"),
        cidade: document.getElementById("cidade"),
        estado: document.getElementById("estado"),
        cep: document.getElementById("cep"),
        email: document.getElementById("email"),
        telefone: document.getElementById("telefone"),
        transporte: document.getElementById("transporte"),
        prazo: document.getElementById("prazo"),
        obs: document.getElementById("obs"),
      };
      const produtosContainer = document.getElementById("produtos-container");
      const pedidoContainer = document.getElementById("pedido-container");
      const pedidoVazio = document.getElementById("pedido-vazio");
      const gerarPedidoBtn = document.getElementById("gerar-pedido-btn");

      // ... todas as suas funções (popularClientes, renderizar, adicionarAoPedido, etc.) permanecem aqui ...
      async function popularClientes(filtro = "") {
        if (clientesCadastrados.length === 0) {
          await carregarClientes();
        }
        selectCliente.innerHTML = '';
        const optionPadrao = document.createElement("option");
        optionPadrao.value = "";
        optionPadrao.textContent = "- Selecione um cliente -";
        selectCliente.appendChild(optionPadrao);
        const optionNovo = document.createElement("option");
        optionNovo.value = "novo";
        optionNovo.textContent = "- Inserir manualmente -";
        selectCliente.appendChild(optionNovo);
        const filtroLower = filtro.toLowerCase();
        const clientesFiltrados = clientesCadastrados.filter((cliente) => {
          return (
            (cliente.razao && String(cliente.razao).toLowerCase().includes(filtroLower)) ||
            (cliente.cnpj && String(cliente.cnpj).toLowerCase().includes(filtroLower)) ||
            (cliente.cidade && String(cliente.cidade).toLowerCase().includes(filtroLower)) ||
            (cliente.email && String(cliente.email).toLowerCase().includes(filtroLower)) ||
            (cliente.telefone && String(cliente.telefone).toLowerCase().includes(filtroLower))
          );
        });
        clientesFiltrados.forEach((cliente) => {
          const option = document.createElement("option");
          option.value = cliente.id;
          option.textContent = cliente.razao;
          selectCliente.appendChild(option);
        });
      }
      function preencherFormularioCliente(clienteId) {
        if (clienteId === "novo" || !clienteId) {
          Object.values(inputsCliente).forEach((input) => (input.value = ""));
          return;
        }
        const cliente = clientesCadastrados.find((c) => c.id === clienteId);
        if (cliente) {
          for (const key in inputsCliente) {
            inputsCliente[key].value = cliente[key] || "";
          }
        }
      }
      function renderizarProdutosPorCategoria() {
        const categoriasOrdenadas = [
          "Aventura",
          "PRO",
          "Urbano",
          "Estilo",
          "Acessórios",
        ];
        const categoriasAgrupadas = produtosData.reduce((acc, produto) => {
          acc[produto.CATEGORIA] = acc[produto.CATEGORIA] || [];
          acc[produto.CATEGORIA].push(produto);
          return acc;
        }, {});
        categoriasOrdenadas.forEach((categoria) => {
          const categoriaProdutos = categoriasAgrupadas[categoria];
          if (!categoriaProdutos || categoriaProdutos.length === 0) return;
          const categoriaDiv = document.createElement("section");
          categoriaDiv.className = "card";
          let tabelaHTML = `<div class="card-header"><h2>${categoria}</h2></div><div class="table-responsive"><table><thead><tr><th>REF.</th><th>DESCRIÇÃO</th><th>PREÇO</th><th>Desc. Extra</th><th>Tamanhos & Quantidades</th><th>Cor</th><th>Ação</th></tr></thead><tbody>`;
          categoriaProdutos.forEach((produto) => {
            const tamanhosNormais =
              produto.REFERENCIA !== "201" &&
              produto.REFERENCIA !== "203" &&
              produto.REFERENCIA !== "204";
            let tamanhosInputHTML = '<div class="tamanho-input-container">';
            if (tamanhosNormais) {
              const tamanhosProduto = Array.isArray(produto.TAMANHOS)
                ? produto.TAMANHOS
                : [produto.TAMANHOS];
              tamanhosProduto.forEach((tamanho) => {
                const tamanhoId = tamanho.replace(/[^a-zA-Z0-9]/g, "");
                tamanhosInputHTML += `<div><label for="quantidade-${produto.REFERENCIA}-${tamanhoId}">${tamanho}</label><input type="number" min="0" value="0" id="quantidade-${produto.REFERENCIA}-${tamanhoId}"></div>`;
              });
            } else {
              tamanhosInputHTML += `<input type="text" placeholder="Digite Tamanho/Bota" class="manual-tamanho-input" id="tamanho-${produto.REFERENCIA}">`;
            }
            tamanhosInputHTML += "</div>";
            tabelaHTML += `<tr><td>${produto.REFERENCIA}</td><td>${
              produto.DESCRIÇÃO
            }<br><small style="color: #6c757d;">${
              Array.isArray(produto.TAMANHOS)
                ? produto.TAMANHOS.join(" / ")
                : produto.TAMANHOS
            }</small></td><td>R$ ${produto.PRECO.toFixed(
              2
            )}</td><td><input type="number" min="0" value="0" class="desconto-input" id="desconto-${
              produto.REFERENCIA
            }" style="width: 70px;"></td><td>${tamanhosInputHTML}</td><td><input type="text" placeholder="Opcional" id="cor-${
              produto.REFERENCIA
            }" style="width: 100px;"></td><td><button class="btn btn-success btn-sm" onclick='adicionarAoPedido(${JSON.stringify(
              produto
            )})'>Adicionar</button></td></tr>`;
          });
          tabelaHTML += `</tbody></table></div>`;
          categoriaDiv.innerHTML = tabelaHTML;
          produtosContainer.appendChild(categoriaDiv);
        });
      }
      function adicionarAoPedido(produto) {
        const corSelecionada = document
          .getElementById(`cor-${produto.REFERENCIA}`)
          .value.trim();
        const descontoExtra =
          parseFloat(
            document.getElementById(`desconto-${produto.REFERENCIA}`).value
          ) || 0;
        let itemAdicionado = false;
        const handleItem = (tamanho, quantidade) => {
          if (quantidade <= 0) return;
          itemAdicionado = true;
          let precoFinal = produto.PRECO;
          if (descontoExtra > 0) {
            precoFinal *= 1 - descontoExtra / 100;
          }
          const tamanhoNormalizado = tamanho.split("-")[0].trim().toUpperCase();
          if (["EXG", "2G", "3G"].includes(tamanhoNormalizado))
            precoFinal *= 1.15;
          else if (["4G", "5G"].includes(tamanhoNormalizado)) precoFinal *= 1.4;
          let itemDesc = tamanho;
          if (corSelecionada) itemDesc += `, Cor: ${corSelecionada}`;
          const itemExistente = window.pedidoItens.find(
            (item) =>
              item.REFERENCIA === produto.REFERENCIA &&
              item.tamanho === itemDesc &&
              item.preco === precoFinal
          );
          if (itemExistente) {
            itemExistente.quantidade += quantidade;
          } else {
            window.pedidoItens.push({
              REFERENCIA: produto.REFERENCIA,
              DESCRIÇÃO: produto.DESCRIÇÃO,
              tamanho: itemDesc,
              preco: precoFinal,
              quantidade: quantidade,
              descontoExtra: descontoExtra,
            });
          }
        };
        const isManualSize = ["201", "203", "204"].includes(produto.REFERENCIA);
        if (isManualSize) {
          const tamanhoManual = document
            .getElementById(`tamanho-${produto.REFERENCIA}`)
            .value.trim();
          if (tamanhoManual) {
            handleItem(tamanhoManual, 1);
          } else {
            alert(
              `Por favor, digite o tamanho para o produto ${produto.DESCRIÇÃO}.`
            );
          }
        } else {
          const tamanhosProduto = Array.isArray(produto.TAMANHOS)
            ? produto.TAMANHOS
            : [produto.TAMANHOS];
          tamanhosProduto.forEach((tamanho) => {
            const tamanhoId = tamanho.replace(/[^a-zA-Z0-9]/g, "");
            const quantidade =
              parseInt(
                document.getElementById(
                  `quantidade-${produto.REFERENCIA}-${tamanhoId}`
                ).value
              ) || 0;
            handleItem(tamanho, quantidade);
          });
        }
        if (itemAdicionado) {
          atualizarVisualizacaoPedido();
        } else if (!isManualSize) {
          alert(
            `Por favor, informe a quantidade para pelo menos um tamanho do produto ${produto.DESCRIÇÃO}.`
          );
        }
      }
      function removerDoPedido(index) {
        window.pedidoItens.splice(index, 1);
        atualizarVisualizacaoPedido();
      }
      
      function alterarQuantidadeItem(index, novaQuantidade) {
        const quantidade = parseInt(novaQuantidade);
        if (quantidade < 1) {
          alert('A quantidade deve ser pelo menos 1.');
          return;
        }
        if (window.pedidoItens[index]) {
          window.pedidoItens[index].quantidade = quantidade;
          atualizarVisualizacaoPedido();
        }
      }
      function atualizarVisualizacaoPedido() {
        pedidoContainer.innerHTML = "";
        subtotalPedido = 0;
        // Garante que window.pedidoItens sempre seja um array
        if (!Array.isArray(window.pedidoItens)) {
          window.pedidoItens = [];
        }
        if (window.pedidoItens.length > 0) {
          pedidoVazio.style.display = "none";
          window.pedidoItens.forEach((item, index) => {
            const itemDiv = document.createElement("div");
            itemDiv.className = "pedido-item";
            const precoTotalItem = item.preco * item.quantidade;
            subtotalPedido += precoTotalItem;
            itemDiv.innerHTML = `<div class="pedido-item-info"><strong>${
              item.DESCRIÇÃO
            } (Ref: ${item.REFERENCIA})</strong><br><small>Tamanho/Cor: ${
              item.tamanho
            } | Qtd: <input type="number" min="1" value="${item.quantidade}" 
            onchange="alterarQuantidadeItem(${index}, this.value)" 
            style="width: 60px; padding: 4px; border: 1px solid #ddd; border-radius: 4px; text-align: center; font-size: 0.9rem;"> 
            | Unit: R$ ${item.preco.toFixed(2)}${
              item.descontoExtra > 0 ? ` (Desc: ${item.descontoExtra}%)` : ""
            } | Total: R$ ${precoTotalItem.toFixed(
              2
            )}</small></div><button class="btn btn-danger" onclick="removerDoPedido(${index})">Remover</button>`;
            pedidoContainer.appendChild(itemDiv);
          });
        } else {
          pedidoVazio.style.display = "block";
        }
        aplicarDescontosGerais();
      }
      function aplicarDescontosGerais() {
        let totalComDescontoPrazo =
          subtotalPedido * (1 - descontoPrazoPercentual / 100);
        totalPedidoComDesconto =
          totalComDescontoPrazo * (1 - descontoVolumePercentual / 100);
        document.getElementById("total-pedido").textContent =
          totalPedidoComDesconto.toFixed(2);
      }
      function aplicarDescontoPrazo(percentual) {
        descontoPrazoPercentual = isNaN(percentual) ? 0 : percentual;
        aplicarDescontosGerais();
      }
      function aplicarDescontoVolume(percentual) {
        descontoVolumePercentual = isNaN(percentual) ? 0 : percentual;
        aplicarDescontosGerais();
      }
      function gerarPedidoPDF() {
        if (window.pedidoItens.length === 0) {
          alert("O pedido está vazio. Adicione itens antes de gerar o PDF.");
          return;
        }
        // Validação dos campos obrigatórios
        if (!inputsCliente.transporte.value.trim()) {
          alert("O campo Transporte é obrigatório.");
          inputsCliente.transporte.focus();
          return;
        }
        if (!inputsCliente.prazo.value.trim()) {
          alert("O campo Prazo de Pagamento é obrigatório.");
          inputsCliente.prazo.focus();
          return;
        }
        if (!inputsCliente.obs.value.trim()) {
          alert("O campo Observações é obrigatório.");
          inputsCliente.obs.focus();
          return;
        }

        const { jsPDF } = window.jspdf;
        const doc = new jsPDF("p", "mm", "a4");
        const pageWidth = doc.internal.pageSize.getWidth();
        const pageHeight = doc.internal.pageSize.getHeight();
        const margin = 15;
        let finalY = 0;

        const drawHeaderAndFooter = (data) => {
          const logoImg = new Image();
          logoImg.src = "https://i.imgur.com/vjq26ym.png";
          doc.addImage(logoImg, "PNG", margin, 10, 90, 15);
          doc.setFontSize(16);
          doc.setFont("helvetica", "bold");
          doc.text("Pedido de Venda - Pantaneiro", pageWidth - margin, 18, {
            align: "right",
          });
          const hoje = new Date();
          const dataAtual = `${hoje.getDate().toString().padStart(2, "0")}/${(
            hoje.getMonth() + 1
          )
            .toString()
            .padStart(2, "0")}/${hoje.getFullYear()}`;
          doc.setFontSize(10);
          doc.setFont("helvetica", "normal");
          doc.text(`Data: ${dataAtual}`, pageWidth - margin, 24, {
            align: "right",
          });

          const pageCount = doc.internal.getNumberOfPages();
          doc.setFontSize(8);
          doc.text(
            `Página ${data.pageNumber} de ${pageCount}`,
            pageWidth / 2,
            pageHeight - 10,
            { align: "center" }
          );
        };

        drawHeaderAndFooter({ pageNumber: 1 });

        doc.autoTable({
          startY: 30,
          theme: "grid",
          head: [
            [
              {
                content: "DADOS DO CLIENTE",
                colSpan: 4,
                styles: {
                  halign: "center",
                  fontStyle: "bold",
                  fillColor: [230, 230, 230],
                  textColor: 30,
                },
              },
            ],
          ],
          body: [
            [
              "Cliente:",
              { content: inputsCliente.razao.value || "N/A", colSpan: 3 },
            ],
            [
              "CNPJ:",
              inputsCliente.cnpj.value || "N/A",
              "I.E.:",
              inputsCliente.ie.value || "N/A",
            ],
            [
              "Telefone:",
              inputsCliente.telefone.value || "N/A",
              "E-mail:",
              inputsCliente.email.value || "N/A",
            ],
            [
              "Endereço:",
              {
                content: `${inputsCliente.endereco.value || ""}, ${
                  inputsCliente.bairro.value || ""
                }`,
                colSpan: 3,
              },
            ],
            [
              "Cidade/UF:",
              `${inputsCliente.cidade.value || ""}/${
                inputsCliente.estado.value || ""
              }`,
              "CEP:",
              inputsCliente.cep.value || "",
            ],
          ],
          styles: { fontSize: 8, cellPadding: 1.5 },
          columnStyles: {
            0: { fontStyle: "bold", cellWidth: 22 },
            2: { fontStyle: "bold", cellWidth: 20 },
          },
          margin: { left: margin, right: margin },
        });

        let startY = doc.autoTable.previous.finalY + 7;

        const descontoGeral = (1 - descontoPrazoPercentual / 100) * (1 - descontoVolumePercentual / 100);
        const head = [
          ["Ref.", "Descrição", "Tam/Cor", "Qtd", "Unit.", "Desc.%", "Total"],
        ];
        const body = window.pedidoItens.map((item) => {
          const precoUnitarioComDesconto = item.preco * descontoGeral;
          return [
            item.REFERENCIA,
            item.DESCRIÇÃO,
            item.tamanho,
            item.quantidade,
            `R$ ${precoUnitarioComDesconto.toFixed(2)}`,
            `${item.descontoExtra}%`,
            `R$ ${(precoUnitarioComDesconto * item.quantidade).toFixed(2)}`,
          ];
        });

        doc.autoTable({
          head: head,
          body: body,
          startY: startY,
          theme: "grid",
          styles: {
            fontSize: 8,
            cellPadding: 2,
            overflow: "linebreak",
            valign: "middle",
          },
          headStyles: {
            fillColor: [44, 62, 80],
            textColor: [255, 255, 255],
            fontStyle: "bold",
            halign: "center",
          },
          columnStyles: {
            0: { cellWidth: 15 },
            1: { cellWidth: "auto" },
            2: { cellWidth: 30 },
            3: { cellWidth: 10, halign: "center" },
            4: { cellWidth: 20, halign: "right" },
            5: { cellWidth: 15, halign: "center" },
            6: { cellWidth: 22, halign: "right" },
          },
          didDrawPage: (data) => {
            if (data.pageNumber > 1) {
              drawHeaderAndFooter(data);
            }
          },
          margin: { top: 30, bottom: 15 },
        });

        finalY = doc.autoTable.previous.finalY;

        const obsText = `Transporte: ${
          inputsCliente.transporte.value || "A combinar"
        }\nPrazo: ${
          inputsCliente.prazo.value || "A combinar"
        }\n\nObservações:\n${inputsCliente.obs.value || "Nenhuma."}`;

        const summaryData = [];
        summaryData.push(["Subtotal sem Desconto:", `R$ ${subtotalPedido.toFixed(2)}`]);
        if (descontoPrazoPercentual > 0) {
          summaryData.push([
            `Desconto Prazo (${descontoPrazoPercentual}%):`,
            `- R$ ${((subtotalPedido * descontoPrazoPercentual) / 100).toFixed(
              2
            )}`,
          ]);
        }
        if (descontoVolumePercentual > 0) {
          const baseDescontoVol =
            subtotalPedido * (1 - descontoPrazoPercentual / 100);
          summaryData.push([
            `Desconto Volume (${descontoVolumePercentual}%):`,
            `- R$ ${(
              (baseDescontoVol * descontoVolumePercentual) /
              100
            ).toFixed(2)}`,
          ]);
        }
        summaryData.push(["", ""]);
        summaryData.push([
          {
            content: "Total do Pedido:",
            styles: { fontStyle: "bold", fontSize: 10 },
          },
          {
            content: `R$ ${totalPedidoComDesconto.toFixed(2)}`,
            styles: { fontStyle: "bold", fontSize: 10 },
          },
        ]);

        const finalTableBody = [];
        const leftColumn = {
          content: obsText,
          rowSpan: summaryData.length,
          styles: { valign: "top", fontSize: 9 },
        };

        for (let i = 0; i < summaryData.length; i++) {
          const row = [];
          if (i === 0) row.push(leftColumn);
          row.push(summaryData[i][0]);
          row.push(summaryData[i][1]);
          finalTableBody.push(row);
        }

        doc.autoTable({
          startY: finalY + 8,
          theme: "plain",
          body: finalTableBody,
          margin: { left: margin, right: margin },
          columnStyles: {
            0: { cellWidth: pageWidth / 2 - margin },
            1: { halign: "right", fontStyle: "bold" },
            2: { halign: "right" },
          },
        });

        const nomeArquivo = `G8 Pedido Pantaneiro - ${inputsCliente.razao.value.replace(
          /[\s\/]/g,
          "_"
        )} - ${new Date().toLocaleDateString("pt-BR").replace(/\//g, "-")}.pdf`;
        doc.save(nomeArquivo);

        // Enviar pedido para o backend
        const descricaoPedido = `Cliente: ${inputsCliente.razao.value} Itens: ${window.pedidoItens.map(item => item.REFERENCIA + ' x' + item.quantidade).join(', ')} Total: R$ ${totalPedidoComDesconto.toFixed(2)}`;
        const dadosPedido = {
          cliente: Object.fromEntries(Object.entries(inputsCliente).map(([k, v]) => [k, v.value])),
          itens: window.pedidoItens,
          descontos: {
            prazo: parseFloat(document.getElementById('desconto-prazo').value) || 0,
            volume: parseFloat(document.getElementById('desconto-volume').value) || 0
          },
          total: totalPedidoComDesconto,
          data: new Date().toISOString()
        };
        fetch('/api/pedidos', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            empresa: 'pantaneiro7',
            descricao: descricaoPedido,
            dados: dadosPedido
          })
        })
        .then(resp => {
          if (resp.ok) {
            alert('Pedido enviado e salvo com sucesso!');
          } else {
            alert('Erro ao salvar o pedido no banco.');
          }
        })
        .catch(() => {
          alert('Erro ao conectar com o servidor.');
        });
      }

      // SCRIPT DE USUÁRIO ADICIONADO AQUI
      document.addEventListener("DOMContentLoaded", async () => {
        // --- Início da lógica de autenticação ---
        const loggedInUser = sessionStorage.getItem("loggedInUser");

        if (loggedInUser) {
          document.getElementById(
            "user-info"
          ).textContent = `Bem-vindo(a), ${loggedInUser}!`;
        } else {
          alert("Acesso negado. Por favor, realize o login.");
          window.location.href = "index.html"; // Mude "index.html" se sua página de login tiver outro nome
        }

        document
          .getElementById("logout-button")
          .addEventListener("click", function () {
            sessionStorage.removeItem("loggedInUser");
            alert("Você saiu da sua conta.");
            window.location.href = "index.html"; // Mude "index.html" se sua página de login tiver outro nome
          });
        // --- Fim da lógica de autenticação ---

        // Carregar produtos diretamente do próprio index
        renderizarProdutosPorCategoria(window.produtosData);

        // Carregar clientes e só então ativar eventos relacionados a clientes
        await popularClientes().then(() => {
          selectCliente.addEventListener("change", (e) => preencherFormularioCliente(e.target.value));
          gerarPedidoBtn.addEventListener("click", gerarPedidoPDF);
          const buscaInput = document.getElementById("busca-cliente");
          buscaInput.addEventListener("input", (e) => {
            popularClientes(e.target.value);
            mostrarSugestoesClientes(e.target.value);
          });
          document.addEventListener("mousedown", (event) => {
            const sugestoesDiv = document.getElementById("sugestoes-clientes");
            const buscaInput = document.getElementById("busca-cliente");
            if (!sugestoesDiv.contains(event.target) && event.target !== buscaInput) {
              sugestoesDiv.style.display = "none";
            }
          });
        });

        // Busca de produtos
        const buscaProdutoInput = document.getElementById("busca-produto");
        buscaProdutoInput.addEventListener("input", (e) => {
          mostrarSugestoesProdutos(e.target.value);
          if (!e.target.value) {
            renderizarProdutosPorCategoria(window.produtosData);
          }
        });
        document.addEventListener("mousedown", (event) => {
          const sugestoesDiv = document.getElementById("sugestoes-produtos");
          const buscaProdutoInput = document.getElementById("busca-produto");
          if (!sugestoesDiv.contains(event.target) && event.target !== buscaProdutoInput) {
            sugestoesDiv.style.display = "none";
          }
        });
      });

      // Função para mostrar sugestões de clientes
      function mostrarSugestoesClientes(filtro) {
        const sugestoesDiv = document.getElementById("sugestoes-clientes");
        sugestoesDiv.innerHTML = "";
        if (!filtro || filtro.length < 2) {
          sugestoesDiv.style.display = "none";
          return;
        }
        const filtroLower = filtro.toLowerCase();
        const clientesFiltrados = clientesCadastrados.filter((cliente) => {
          return (
            (cliente.razao && String(cliente.razao).toLowerCase().includes(filtroLower)) ||
            (cliente.cnpj && String(cliente.cnpj).toLowerCase().includes(filtroLower)) ||
            (cliente.cidade && String(cliente.cidade).toLowerCase().includes(filtroLower)) ||
            (cliente.email && String(cliente.email).toLowerCase().includes(filtroLower)) ||
            (cliente.telefone && String(cliente.telefone).toLowerCase().includes(filtroLower))
          );
        });
        if (clientesFiltrados.length === 0) {
          sugestoesDiv.style.display = "none";
          return;
        }
        sugestoesDiv.style.display = "block";
        clientesFiltrados.slice(0, 5).forEach((cliente) => {
          const item = document.createElement("div");
          item.className = "sugestao-cliente-item";
          item.innerHTML = `<strong>${cliente.razao}</strong><br><small>${cliente.cidade || ""} | CNPJ: ${cliente.cnpj || ""} | Tel: ${cliente.telefone || ""}</small>`;
          item.addEventListener("mousedown", (e) => {
            e.preventDefault();
            selectCliente.value = cliente.id;
            preencherFormularioCliente(cliente.id);
            document.getElementById("busca-cliente").value = cliente.razao;
            sugestoesDiv.style.display = "none";
          });
          sugestoesDiv.appendChild(item);
        });
      }

      // Função para mostrar sugestões de produtos
      function mostrarSugestoesProdutos(filtro) {
        const sugestoesDiv = document.getElementById("sugestoes-produtos");
        sugestoesDiv.innerHTML = "";
        if (!filtro || filtro.length < 2) {
          sugestoesDiv.style.display = "none";
          return;
        }
        const filtroLower = filtro.toLowerCase();
        const produtosFiltrados = produtosData.filter((produto) => {
          return (
            (produto.REFERENCIA && String(produto.REFERENCIA).toLowerCase().includes(filtroLower)) ||
            (produto.DESCRIÇÃO && String(produto.DESCRIÇÃO).toLowerCase().includes(filtroLower))
          );
        });
        if (produtosFiltrados.length === 0) {
          sugestoesDiv.style.display = "none";
          return;
        }
        sugestoesDiv.style.display = "block";
        produtosFiltrados.slice(0, 8).forEach((produto) => {
          const item = document.createElement("div");
          item.className = "sugestao-cliente-item";
          item.innerHTML = `<strong>${produto.REFERENCIA}</strong> - ${produto.DESCRIÇÃO}`;
          item.addEventListener("mousedown", (e) => {
            e.preventDefault();
            document.getElementById("busca-produto").value = `${produto.REFERENCIA} - ${produto.DESCRIÇÃO}`;
            sugestoesDiv.style.display = "none";
            renderizarProdutosFiltrados([produto]);
          });
          sugestoesDiv.appendChild(item);
        });
      }

      // Função para renderizar produtos filtrados (ou todos)
      function renderizarProdutosFiltrados(produtos) {
        produtosContainer.innerHTML = "";
        // Agrupa por categoria se vier mais de um produto, senão mostra só o produto
        if (produtos.length === 1) {
          const produto = produtos[0];
          const categoriaDiv = document.createElement("section");
          categoriaDiv.className = "card";
          let tabelaHTML = `<div class="card-header"><h2>${produto.CATEGORIA}</h2></div><div class="table-responsive"><table><thead><tr><th>REF.</th><th>DESCRIÇÃO</th><th>PREÇO</th><th>Desc. Extra</th><th>Tamanhos & Quantidades</th><th>Cor</th><th>Ação</th></tr></thead><tbody>`;
          const tamanhosNormais = produto.REFERENCIA !== "201" && produto.REFERENCIA !== "203" && produto.REFERENCIA !== "204";
          let tamanhosInputHTML = '<div class="tamanho-input-container">';
          if (tamanhosNormais) {
            const tamanhosProduto = Array.isArray(produto.TAMANHOS) ? produto.TAMANHOS : [produto.TAMANHOS];
            tamanhosProduto.forEach((tamanho) => {
              const tamanhoId = tamanho.replace(/[^a-zA-Z0-9]/g, "");
              tamanhosInputHTML += `<div><label for="quantidade-${produto.REFERENCIA}-${tamanhoId}">${tamanho}</label><input type="number" min="0" value="0" id="quantidade-${produto.REFERENCIA}-${tamanhoId}"></div>`;
            });
          } else {
            tamanhosInputHTML += `<input type="text" placeholder="Digite Tamanho/Bota" class="manual-tamanho-input" id="tamanho-${produto.REFERENCIA}">`;
          }
          tamanhosInputHTML += "</div>";
          tabelaHTML += `<tr><td>${produto.REFERENCIA}</td><td>${produto.DESCRIÇÃO}<br><small style="color: #6c757d;">${Array.isArray(produto.TAMANHOS) ? produto.TAMANHOS.join(" / ") : produto.TAMANHOS}</small></td><td>R$ ${produto.PRECO.toFixed(2)}</td><td><input type="number" min="0" value="0" class="desconto-input" id="desconto-${produto.REFERENCIA}" style="width: 70px;"></td><td>${tamanhosInputHTML}</td><td><input type="text" placeholder="Opcional" id="cor-${produto.REFERENCIA}" style="width: 100px;"></td><td><button class="btn btn-success btn-sm" onclick='adicionarAoPedido(${JSON.stringify(produto)})'>Adicionar</button></td></tr>`;
          tabelaHTML += `</tbody></table></div>`;
          categoriaDiv.innerHTML = tabelaHTML;
          produtosContainer.appendChild(categoriaDiv);
        } else {
          renderizarProdutosPorCategoria(produtos);
        }
      }

      // Adaptar renderizarProdutosPorCategoria para aceitar filtro
      function renderizarProdutosPorCategoria(produtos = produtosData) {
        produtosContainer.innerHTML = "";
        const categoriasOrdenadas = ["Aventura", "PRO", "Urbano", "Estilo", "Acessórios"];
        const categoriasAgrupadas = produtos.reduce((acc, produto) => {
          acc[produto.CATEGORIA] = acc[produto.CATEGORIA] || [];
          acc[produto.CATEGORIA].push(produto);
          return acc;
        }, {});
        categoriasOrdenadas.forEach((categoria) => {
          const categoriaProdutos = categoriasAgrupadas[categoria];
          if (!categoriaProdutos || categoriaProdutos.length === 0) return;
          const categoriaDiv = document.createElement("section");
          categoriaDiv.className = "card";
          let tabelaHTML = `<div class="card-header"><h2>${categoria}</h2></div><div class="table-responsive"><table><thead><tr><th>REF.</th><th>DESCRIÇÃO</th><th>PREÇO</th><th>Desc. Extra</th><th>Tamanhos & Quantidades</th><th>Cor</th><th>Ação</th></tr></thead><tbody>`;
          categoriaProdutos.forEach((produto) => {
            const tamanhosNormais = produto.REFERENCIA !== "201" && produto.REFERENCIA !== "203" && produto.REFERENCIA !== "204";
            let tamanhosInputHTML = '<div class="tamanho-input-container">';
            if (tamanhosNormais) {
              const tamanhosProduto = Array.isArray(produto.TAMANHOS) ? produto.TAMANHOS : [produto.TAMANHOS];
              tamanhosProduto.forEach((tamanho) => {
                const tamanhoId = tamanho.replace(/[^a-zA-Z0-9]/g, "");
                tamanhosInputHTML += `<div><label for="quantidade-${produto.REFERENCIA}-${tamanhoId}">${tamanho}</label><input type="number" min="0" value="0" id="quantidade-${produto.REFERENCIA}-${tamanhoId}"></div>`;
              });
            } else {
              tamanhosInputHTML += `<input type="text" placeholder="Digite Tamanho/Bota" class="manual-tamanho-input" id="tamanho-${produto.REFERENCIA}">`;
            }
            tamanhosInputHTML += "</div>";
            tabelaHTML += `<tr><td>${produto.REFERENCIA}</td><td>${produto.DESCRIÇÃO}<br><small style="color: #6c757d;">${Array.isArray(produto.TAMANHOS) ? produto.TAMANHOS.join(" / ") : produto.TAMANHOS}</small></td><td>R$ ${produto.PRECO.toFixed(2)}</td><td><input type="number" min="0" value="0" class="desconto-input" id="desconto-${produto.REFERENCIA}" style="width: 70px;"></td><td>${tamanhosInputHTML}</td><td><input type="text" placeholder="Opcional" id="cor-${produto.REFERENCIA}" style="width: 100px;"></td><td><button class="btn btn-success btn-sm" onclick='adicionarAoPedido(${JSON.stringify(produto)})'>Adicionar</button></td></tr>`;
          });
          tabelaHTML += `</tbody></table></div>`;
          categoriaDiv.innerHTML = tabelaHTML;
          produtosContainer.appendChild(categoriaDiv);
        });
      }
    </script>
    <script src="editor-pedido.js"></script>
  </body>
</html>
