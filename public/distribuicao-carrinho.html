<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>G8 Representações - Loja Distribuição</title>
    <link rel="icon" href="https://i.imgur.com/WveVVY5.png" type="image/png" />
    <link rel="apple-touch-icon" href="https://i.imgur.com/WveVVY5.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="modern-design.css">
    <link rel="stylesheet" href="mobile.css">
    <link rel="stylesheet" href="connection-status.css">
    <script src="advanced-notifications.js"></script>
    <script src="animations.js"></script>
    <script src="offline-system.js"></script>
    <script src="connection-monitor.js"></script>

    <style>
      :root {
        /* === CORES G8 === */
        --g8-red: #ff0000;
        --g8-black: #000000;
        --g8-white: #ffffff;
        
        --primary-color: #ff0000;
        --primary-hover: #cc0000;
        --secondary-color: #000000;
        --success-color: #059669;
        --success-hover: #047857;
        --danger-color: #dc2626;
        --danger-hover: #b91c1c;
        --warning-color: #d97706;
        --warning-hover: #b45309;
        --light-color: #ffffff;
        --dark-color: #000000;
        --text-color: #000000;
        --text-muted: #666666;
        --bg-color: #ffffff;
        --card-bg: #fafafa;
        --border-color: #e0e0e0;
        --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        --shadow-red: 0 10px 40px rgba(255, 0, 0, 0.25);
        --border-radius: 8px;
        --border-radius-lg: 12px;
        --border-radius-xl: 16px;
        --gradient-primary: linear-gradient(135deg, #ff0000 0%, #cc0000 100%);
        --gradient-secondary: linear-gradient(135deg, #000000 0%, #333333 100%);
        --gradient-success: linear-gradient(135deg, #059669 0%, #047857 100%);
        --gradient-danger: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
        --gradient-dark: linear-gradient(135deg, #1e293b 0%, #000000 100%);
        --gradient-bg: linear-gradient(135deg, #ffffff 0%, #f5f5f5 100%);
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        color: var(--text-color);
        background: var(--bg-color);
        margin: 0;
        padding: 80px 20px 0 20px;
        font-size: 14px;
        min-height: 100vh;
        position: relative;
        display: flex;
        flex-direction: column;
      }

      /* Fundo animado sutil */
      body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: 
          radial-gradient(circle at 20% 80%, rgba(255, 0, 0, 0.05) 0%, transparent 50%),
          radial-gradient(circle at 80% 20%, rgba(0, 0, 0, 0.08) 0%, transparent 50%),
          radial-gradient(circle at 40% 40%, rgba(255, 0, 0, 0.03) 0%, transparent 50%);
        animation: backgroundFloat 25s ease-in-out infinite;
        z-index: -1;
      }

      @keyframes backgroundFloat {
        0%, 100% { transform: translateX(0) translateY(0); }
        50% { transform: translateX(-15px) translateY(15px); }
      }

      /* --- HEADER DE USUÁRIO E LOGOUT --- */
      .header {
        width: 100%;
        position: absolute;
        top: 0;
        left: 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 25px;
        background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
        box-shadow: var(--shadow);
        z-index: 1000;
        border-bottom: 1px solid var(--border-color);
        height: 70px;
        box-sizing: border-box;
      }

      .header-left {
        flex: 0 0 auto;
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .header-center {
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
      }

      .header-center img {
        height: 45px;
        width: auto;
      }

      .header-right {
        flex: 0 0 auto;
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .user-info {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        font-size: 0.9rem;
        color: var(--text-color);
        font-weight: 500;
      }

      .btn-logout {
        background: linear-gradient(135deg, var(--danger-color) 0%, #dc2626 100%);
        color: white;
        border: none;
        padding: 10px 16px;
        border-radius: 8px;
        font-size: 0.9rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
      }

      .btn-logout:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
        background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
      }

      #logout-button, .btn {
        background: var(--gradient-primary);
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: var(--border-radius);
        cursor: pointer;
        font-size: 0.9rem;
        font-weight: 600;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 5px;
        transition: all 0.3s ease;
        box-shadow: var(--shadow-sm);
      }

      #logout-button:hover, .btn:hover {
        background: var(--primary-hover);
        transform: translateY(-1px);
        box-shadow: var(--shadow);
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 20px;
      }

      /* Melhorar visual geral */
      body {
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        min-height: 100vh;
      }

      .card {
        background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
        border-radius: 20px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
        margin-bottom: 30px;
        overflow: hidden;
      }

      .card-header {
        background: linear-gradient(135deg, var(--primary-color) 0%, #ff4444 100%);
        color: white;
        padding: 20px 24px;
        border-radius: 20px 20px 0 0;
        display: flex;
        align-items: center;
        gap: 12px;
        box-shadow: 0 4px 20px rgba(255, 0, 0, 0.2);
      }

      .card-header h2 {
        margin: 0;
        font-size: 1.1rem;
        font-weight: 800;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }

      /* Animações suaves */
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .produto-card {
        animation: fadeInUp 0.6s ease forwards;
      }

      /* Melhorar inputs */
      input:focus, select:focus {
        border-color: var(--primary-color) !important;
        box-shadow: 0 0 0 3px rgba(255, 0, 0, 0.1) !important;
        transform: translateY(-2px);
      }

      /* Efeitos de hover nos cards de filtro */
      .form-group input:hover, .form-group select:hover {
        border-color: rgba(255, 0, 0, 0.3);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      /* Grid de produtos */
      .produtos-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 12px;
        margin-bottom: 20px;
      }

      @media (min-width: 768px) {
        .produtos-grid {
          grid-template-columns: repeat(3, 1fr);
          gap: 12px;
        }
      }

      @media (min-width: 1024px) {
        .produtos-grid {
          grid-template-columns: repeat(4, 1fr);
          gap: 12px;
        }
      }

      @media (min-width: 1400px) {
        .produtos-grid {
          grid-template-columns: repeat(5, 1fr);
          gap: 12px;
        }
      }

      /* Cards de produtos */
      .produto-card {
        background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
        border-radius: 12px;
        padding: 12px;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
        border: 1px solid rgba(255, 0, 0, 0.1);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
        height: fit-content;
        backdrop-filter: blur(10px);
      }

      .produto-card:hover {
        box-shadow: 0 8px 40px rgba(255, 0, 0, 0.15);
        transform: translateY(-8px) scale(1.02);
        border-color: var(--primary-color);
        background: linear-gradient(145deg, #ffffff 0%, #fff5f5 100%);
      }

      .produto-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, var(--primary-color) 0%, #ff4444 100%);
        transform: scaleX(0);
        transition: transform 0.4s ease;
        border-radius: 16px 16px 0 0;
      }

      .produto-card:hover::before {
        transform: scaleX(1);
      }

      .produto-card::after {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(255, 0, 0, 0.05) 0%, transparent 70%);
        opacity: 0;
        transition: opacity 0.4s ease;
        pointer-events: none;
      }

      .produto-card:hover::after {
        opacity: 1;
      }

      .produto-imagem {
        width: 100%;
        height: 185px;
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-radius: 12px;
        margin-bottom: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--text-muted);
        font-size: 2rem;
        border: 2px solid rgba(255, 0, 0, 0.1);
        transition: all 0.4s ease;
        overflow: hidden;
        position: relative;
      }

      .produto-imagem img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 12px;
        transition: transform 0.4s ease;
      }

      .produto-imagem:hover {
        border-color: var(--primary-color);
        background: linear-gradient(135deg, #fff0f0 0%, #ffe6e6 100%);
        transform: scale(1.05);
      }

      .produto-imagem:hover img {
        transform: scale(1.1);
      }

      .produto-categoria {
        font-size: 0.65rem;
        color: var(--text-muted);
        background: linear-gradient(135deg, rgba(255, 0, 0, 0.1) 0%, rgba(255, 0, 0, 0.05) 100%);
        padding: 4px 8px;
        border-radius: 12px;
        margin-bottom: 6px;
        text-align: center;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.3px;
        border: 1px solid rgba(255, 0, 0, 0.2);
      }

      .produto-ref {
        font-size: 0.8rem;
        font-weight: 700;
        color: var(--primary-color);
        margin-bottom: 4px;
        text-align: center;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
      }

      .produto-descricao {
        font-size: 0.7rem;
        font-weight: 600;
        color: var(--text-color);
        margin-bottom: 6px;
        line-height: 1.2;
        text-align: center;
        min-height: 1.8rem;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .produto-tamanhos {
        font-size: 0.65rem;
        color: var(--text-muted);
        margin-bottom: 8px;
        text-align: center;
        line-height: 1.2;
        font-weight: 500;
      }

      .produto-preco {
        font-size: 1rem;
        font-weight: 800;
        background: linear-gradient(135deg, var(--success-color) 0%, #00a86b 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 8px;
        text-align: center;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      /* Sistema de tamanhos como Pantaneiro5 */
      .tamanhos-container {
        margin-bottom: 8px;
      }

      .tamanhos-container label {
        display: block;
        margin-bottom: 4px;
        font-weight: 600;
        color: var(--text-color);
        font-size: 0.7rem;
        text-align: center;
      }

      .tamanho-input-container {
        display: flex;
        flex-wrap: wrap;
        gap: 3px;
        align-items: center;
        justify-content: center;
      }

      .tamanho-input-container > div {
        display: flex;
        align-items: center;
        gap: 2px;
        background: rgba(255, 255, 255, 0.8);
        padding: 3px 4px;
        border-radius: 6px;
        border: 1px solid var(--border-color);
        transition: all 0.3s ease;
      }

      .tamanho-input-container > div:hover {
        border-color: var(--primary-color);
        background: rgba(255, 0, 0, 0.05);
      }

      .tamanho-input-container label {
        font-size: 0.6rem;
        font-weight: 600;
        margin: 0;
        color: var(--text-color);
        white-space: nowrap;
      }

      .tamanho-input-container input[type="number"] {
        width: 35px;
        padding: 2px 4px;
        text-align: center;
        border: 1px solid var(--border-color);
        border-radius: 3px;
        font-size: 0.65rem;
        font-weight: 600;
        background: white;
      }

      .tamanho-input-container input[type="number"]:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 2px rgba(255, 0, 0, 0.1);
      }

      .manual-tamanho-input {
        width: 100%;
        padding: 8px 12px;
        border: 2px solid var(--border-color);
        border-radius: var(--border-radius);
        font-size: 0.9rem;
        margin-bottom: 10px;
        text-align: center;
      }

      .manual-tamanho-input:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(255, 0, 0, 0.1);
      }

      .btn-adicionar {
        width: 100%;
        background: linear-gradient(135deg, var(--success-color) 0%, #00a86b 100%);
        color: white;
        border: none;
        padding: 6px 8px;
        border-radius: 8px;
        font-size: 0.7rem;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 4px;
        box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        position: relative;
        overflow: hidden;
      }

      .btn-adicionar::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left 0.5s;
      }

      .btn-adicionar:hover {
        background: linear-gradient(135deg, #00a86b 0%, var(--success-color) 100%);
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
      }

      .btn-adicionar:hover::before {
        left: 100%;
      }

      .btn-adicionar:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
        box-shadow: 0 2px 8px rgba(16, 185, 129, 0.2);
      }

      /* Carrinho lateral */
      .carrinho-sidebar {
        position: fixed;
        top: 0;
        right: -400px;
        width: 400px;
        height: 100vh;
        background: white;
        box-shadow: var(--shadow-xl);
        transition: right 0.3s ease;
        z-index: 1001;
        display: flex;
        flex-direction: column;
      }

      .carrinho-sidebar.open {
        right: 0;
      }

      .carrinho-header {
        padding: 20px;
        background: var(--gradient-primary);
        color: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .carrinho-header h3 {
        margin: 0;
        font-size: 1.2rem;
      }

      .btn-fechar-carrinho {
        background: none;
        border: none;
        color: white;
        font-size: 1.5rem;
        cursor: pointer;
        padding: 5px;
        border-radius: 50%;
        transition: all 0.3s ease;
      }

      .btn-fechar-carrinho:hover {
        background: rgba(255, 255, 255, 0.2);
      }

      .carrinho-content {
        flex: 1;
        overflow-y: auto;
        padding: 20px;
      }

      .carrinho-item {
        display: flex;
        align-items: center;
        gap: 15px;
        padding: 15px 0;
        border-bottom: 1px solid var(--border-color);
      }

      .carrinho-item-imagem {
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-radius: var(--border-radius);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        color: var(--text-muted);
      }

      .carrinho-item-info {
        flex: 1;
      }

      .carrinho-item-nome {
        font-weight: 600;
        margin-bottom: 5px;
      }

      .carrinho-item-detalhes {
        font-size: 0.9rem;
        color: var(--text-muted);
        margin-bottom: 5px;
      }

      .carrinho-item-preco {
        font-weight: 600;
        color: var(--success-color);
      }

      .carrinho-item-quantidade {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-top: 8px;
      }

      .carrinho-item-quantidade input {
        width: 50px;
        text-align: center;
        padding: 4px;
        border: 1px solid var(--border-color);
        border-radius: 4px;
      }

      .btn-remover-item {
        background: var(--gradient-danger);
        color: white;
        border: none;
        padding: 4px 8px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.8rem;
        transition: all 0.3s ease;
      }

      .btn-remover-item:hover {
        background: var(--danger-hover);
      }

      .carrinho-footer {
        padding: 20px;
        background: var(--card-bg);
        border-top: 1px solid var(--border-color);
      }

      .carrinho-total {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        font-size: 1.2rem;
        font-weight: 700;
      }

      .carrinho-total-valor {
        color: var(--primary-color);
      }

      .opcoes-pagamento {
        margin-bottom: 20px;
      }

      .opcao-pagamento {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 10px;
        padding: 10px;
        border: 2px solid var(--border-color);
        border-radius: var(--border-radius);
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .opcao-pagamento:hover {
        border-color: var(--primary-color);
      }

      .opcao-pagamento.selecionada {
        border-color: var(--primary-color);
        background: rgba(255, 0, 0, 0.05);
      }

      .opcao-pagamento input[type="radio"] {
        accent-color: var(--primary-color);
      }

      .desconto-info {
        background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
        border: 1px solid #ffeaa7;
        border-radius: var(--border-radius);
        padding: 10px;
        margin-bottom: 15px;
        color: #856404;
        font-size: 0.9rem;
      }

      .btn-finalizar {
        width: 100%;
        background: var(--gradient-primary);
        color: white;
        border: none;
        padding: 15px;
        border-radius: var(--border-radius);
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .btn-finalizar:hover {
        background: var(--primary-hover);
        transform: translateY(-2px);
        box-shadow: var(--shadow);
      }

      .btn-finalizar:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }

      /* Botão do carrinho flutuante */
      .btn-carrinho-flutuante {
        position: fixed;
        bottom: 30px;
        right: 30px;
        background: var(--gradient-primary);
        color: white;
        border: none;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 1.5rem;
        box-shadow: var(--shadow-lg);
        transition: all 0.3s ease;
        z-index: 1000;
      }

      .btn-carrinho-flutuante:hover {
        transform: scale(1.1);
        box-shadow: var(--shadow-red);
      }

      .carrinho-badge {
        position: absolute;
        top: -5px;
        right: -5px;
        background: var(--danger-color);
        color: white;
        border-radius: 50%;
        width: 25px;
        height: 25px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.8rem;
        font-weight: 600;
      }

      /* Overlay */
      .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }

      .overlay.show {
        opacity: 1;
        visibility: visible;
      }

      /* Responsividade */
      @media (max-width: 768px) {
        .header {
          padding: 15px;
          height: 85px;
          flex-direction: column;
          gap: 10px;
          align-items: center;
          justify-content: center;
        }

        /* Filtros mobile */
        .filtros-container {
          display: block !important;
        }

        .filtros-container > div {
          grid-template-columns: 1fr !important;
          gap: 16px !important;
        }

        .form-group label {
          font-size: 0.9rem !important;
        }

        .form-group input,
        .form-group select {
          padding: 12px 14px !important;
          font-size: 0.95rem !important;
        }
        
        .header-left {
          display: flex;
        }
        
        .header-center {
          position: static;
          transform: none;
          order: 1;
        }
        
        .header-center img {
          width: 200px;
          height: auto;
          max-width: 80%;
        }
        
        .header-right {
          order: 2;
          width: 100%;
          justify-content: space-between;
          gap: 8px;
        }
        
        .user-info {
          font-size: 0.75rem;
          flex: 1;
          text-align: center;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
        }
        
        #logout-button, .btn {
          padding: 6px 10px;
          font-size: 0.75rem;
          min-width: auto;
          flex-shrink: 0;
        }

        body {
          padding-top: 80px;
        }

        .produtos-grid {
          grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
          gap: 8px;
        }

        .carrinho-sidebar {
          width: 100%;
          right: -100%;
        }

        .btn-carrinho-flutuante {
          bottom: 20px;
          right: 20px;
          width: 50px;
          height: 50px;
          font-size: 1.2rem;
        }
      }

      @media (max-width: 480px) {
        .header-center img {
          width: 150px;
          max-width: 75%;
        }

        .produtos-grid {
          grid-template-columns: 1fr;
          gap: 6px;
        }

        .produto-card {
          padding: 8px;
        }

        .produto-imagem {
          height: 185px;
          font-size: 2rem;
        }
      }

      /* Estilos para pedidos */
      .pedido-card {
        background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
        border-radius: 12px;
        padding: 12px;
        margin-bottom: 12px;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
        border: 1px solid rgba(255, 0, 0, 0.1);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .pedido-card:hover {
        box-shadow: 0 8px 40px rgba(255, 0, 0, 0.15);
        transform: translateY(-4px);
        border-color: var(--primary-color);
      }

      .pedido-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
        padding-bottom: 8px;
        border-bottom: 1px solid rgba(255, 0, 0, 0.1);
      }

      .pedido-id {
        font-size: 0.9rem;
        font-weight: 700;
        color: var(--primary-color);
      }

      .pedido-data {
        font-size: 0.7rem;
        color: var(--text-muted);
        font-weight: 600;
      }

      .pedido-status {
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 0.65rem;
        font-weight: 700;
        text-transform: uppercase;
      }

      .pedido-status.pendente {
        background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
        color: #856404;
        border: 1px solid #ffeaa7;
      }

      .pedido-status.processando {
        background: linear-gradient(135deg, #d1ecf1 0%, #bee5eb 100%);
        color: #0c5460;
        border: 1px solid #bee5eb;
      }

      .pedido-status.concluido {
        background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
        color: #155724;
        border: 1px solid #c3e6cb;
      }

      .pedido-total {
        font-size: 1rem;
        font-weight: 800;
        color: var(--success-color);
        text-align: right;
        margin-top: 8px;
        padding-top: 8px;
        border-top: 1px solid rgba(255, 0, 0, 0.1);
      }

      .pedido-itens {
        margin: 8px 0;
      }

      .pedido-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 4px 0;
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      }

      .pedido-item:last-child {
        border-bottom: none;
      }

      .pedido-item-desc {
        flex: 1;
        font-size: 0.7rem;
        color: var(--text-color);
      }

      .pedido-item-qty {
        font-size: 0.7rem;
        color: var(--text-muted);
        margin: 0 6px;
      }

      .pedido-item-preco {
        font-size: 0.7rem;
        font-weight: 600;
        color: var(--success-color);
      }

      .pedido-info {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 8px;
        margin-top: 8px;
        padding-top: 8px;
        border-top: 1px solid rgba(255, 0, 0, 0.1);
      }

      .pedido-info-item {
        text-align: center;
      }

      .pedido-info-label {
        font-size: 0.65rem;
        color: var(--text-muted);
        font-weight: 600;
        text-transform: uppercase;
        margin-bottom: 3px;
      }

      .pedido-info-value {
        font-size: 0.8rem;
        font-weight: 700;
        color: var(--text-color);
      }

      /* Modal de imagem */
      .modal-imagem {
        display: none;
        position: fixed;
        z-index: 2000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.9);
        backdrop-filter: blur(5px);
      }

      .modal-imagem.show {
        display: flex;
        align-items: center;
        justify-content: center;
        animation: fadeIn 0.3s ease;
      }

      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }

      .modal-conteudo {
        position: relative;
        max-width: 90%;
        max-height: 90%;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .modal-imagem img {
        max-width: 100%;
        max-height: 80vh;
        object-fit: contain;
        border-radius: 12px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        animation: zoomIn 0.3s ease;
      }

      @keyframes zoomIn {
        from { transform: scale(0.8); opacity: 0; }
        to { transform: scale(1); opacity: 1; }
      }

      .modal-fechar {
        position: absolute;
        top: -50px;
        right: -50px;
        color: white;
        font-size: 2rem;
        font-weight: bold;
        cursor: pointer;
        background: rgba(255, 0, 0, 0.8);
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        border: 2px solid white;
      }

      .modal-fechar:hover {
        background: rgba(255, 0, 0, 1);
        transform: scale(1.1);
      }

      .modal-info {
        background: rgba(255, 255, 255, 0.95);
        padding: 20px;
        border-radius: 12px;
        margin-top: 20px;
        text-align: center;
        max-width: 500px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      }

      .modal-info h3 {
        color: var(--primary-color);
        margin-bottom: 10px;
        font-size: 1.2rem;
      }

      .modal-info p {
        color: var(--text-color);
        margin-bottom: 5px;
        font-size: 0.9rem;
      }

      .modal-info .preco {
        font-size: 1.3rem;
        font-weight: 700;
        color: var(--success-color);
        margin-top: 10px;
      }

      /* Cursor pointer para imagens clicáveis */
      .produto-imagem {
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .produto-imagem:hover {
        transform: scale(1.02);
        box-shadow: 0 8px 25px rgba(255, 0, 0, 0.2);
      }

      /* Rodapé G8 */
      footer {
        width: 100%;
        text-align: center;
        padding: 15px 20px;
        background: transparent;
        color: #000000;
        margin-top: 40px;
        position: relative;
        font-size: 0.85rem;
        font-weight: 500;
      }
    </style>
  </head>
  <body class="g8-theme-g8-default">
    <header class="header">
      <div class="header-left">
        <div class="status-indicator" id="connection-status">
          <div class="status-dot"></div>
          <span>Online</span>
        </div>
      </div>
      <div class="header-center">
        <img
          id="logo"
          src="https://i.imgur.com/vjq26ym.png"
          alt="Logo G8"
        />
      </div>
      <div class="header-right">
        <div class="user-info">
          <span id="clienteNome">Carregando...</span>
        </div>
        <button class="btn-logout" onclick="logout()">Sair</button>
      </div>
    </header>

    <main class="container">
      <!-- Seção de Filtros -->
      <section class="card">
        <div class="card-header">
          <span role="img" aria-label="Filtros" style="font-size: 1.8em">🔍</span>
          <h2>Filtros e Busca</h2>
        </div>
        
        <div class="filtros-container" style="padding: 16px; background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%); border-radius: 12px; box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);">
          <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 16px; margin-bottom: 16px; align-items: end;">
            <div class="form-group">
              <label for="busca-produto" style="display: block; margin-bottom: 4px; font-weight: 700; color: var(--text-color); font-size: 0.8rem;">
                🔍 Buscar Produto
              </label>
              <input type="text" id="busca-produto" placeholder="Digite referência, descrição ou categoria..." 
                     style="width: 100%; padding: 8px 12px; border: 1px solid rgba(255, 0, 0, 0.1); border-radius: 8px; font-size: 0.8rem; transition: all 0.3s ease; background: white; box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);">
            </div>
            
            <div class="form-group">
              <label for="filtro-categoria" style="display: block; margin-bottom: 4px; font-weight: 700; color: var(--text-color); font-size: 0.8rem;">
                📦 Categoria
              </label>
              <select id="filtro-categoria" style="width: 100%; padding: 8px 12px; border: 1px solid rgba(255, 0, 0, 0.1); border-radius: 8px; font-size: 0.8rem; transition: all 0.3s ease; background: white; box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05); cursor: pointer;">
                <option value="">Todas as categorias</option>
                <option value="PVC">PVC</option>
                <option value="Nylon">Nylon</option>
                <option value="Feminino">Feminino</option>
                <option value="Premium">Premium</option>
                <option value="Luxo">Luxo</option>
                <option value="Calçados">Calçados</option>
                <option value="Motos">Motos</option>
              </select>
            </div>

            <div class="form-group">
              <label for="ordenar-por" style="display: block; margin-bottom: 4px; font-weight: 700; color: var(--text-color); font-size: 0.8rem;">
                📊 Ordenar por
              </label>
              <select id="ordenar-por" style="width: 100%; padding: 8px 12px; border: 1px solid rgba(255, 0, 0, 0.1); border-radius: 8px; font-size: 0.8rem; transition: all 0.3s ease; background: white; box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05); cursor: pointer;">
                <option value="referencia">Referência</option>
                <option value="nome">Nome A-Z</option>
                <option value="preco-asc">Menor Preço</option>
                <option value="preco-desc">Maior Preço</option>
                <option value="categoria">Categoria</option>
              </select>
            </div>
          </div>
          
          <div style="display: flex; justify-content: space-between; align-items: center; padding-top: 12px; border-top: 1px solid rgba(255, 0, 0, 0.1);">
            <button onclick="limparFiltros()" style="background: linear-gradient(135deg, var(--secondary-color) 0%, #6c757d 100%); color: white; border: none; padding: 6px 12px; border-radius: 8px; font-size: 0.75rem; font-weight: 700; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(108, 117, 125, 0.3);">
              🗑️ Limpar Filtros
            </button>
            <span id="contador-produtos" style="color: var(--text-muted); font-size: 0.8rem; font-weight: 700; background: rgba(255, 0, 0, 0.1); padding: 4px 8px; border-radius: 12px;"></span>
          </div>
        </div>
      </section>

      <!-- Seção de Produtos -->
      <section class="card">
        <div class="card-header">
          <span role="img" aria-label="Loja" style="font-size: 1.8em">🛒</span>
          <h2>Produtos Disponíveis</h2>
        </div>
        
        <div class="produtos-grid" id="produtos-grid">
          <!-- Produtos serão carregados aqui -->
        </div>
        
        <div id="nenhum-produto" style="display: none; text-align: center; padding: 20px 10px; color: var(--text-muted);">
          <div style="font-size: 2rem; margin-bottom: 8px;">🔍</div>
          <h3 style="font-size: 1rem;">Nenhum produto encontrado</h3>
          <p style="margin-top: 6px; font-size: 0.8rem;">Tente ajustar os filtros para encontrar o que procura.</p>
        </div>
      </section>

      <!-- Seção Meus Pedidos -->
      <section class="card">
        <div class="card-header">
          <span role="img" aria-label="Pedidos" style="font-size: 1.8em">📋</span>
          <h2>Meus Pedidos</h2>
        </div>
        
        <div style="padding: 16px;">
          <div id="pedidos-container">
            <div id="carregando-pedidos" style="text-align: center; padding: 20px 10px; color: var(--text-muted);">
              <div style="font-size: 2rem; margin-bottom: 8px;">⏳</div>
              <h3 style="font-size: 1rem;">Carregando seus pedidos...</h3>
            </div>
            
            <div id="nenhum-pedido" style="display: none; text-align: center; padding: 20px 10px; color: var(--text-muted);">
              <div style="font-size: 2rem; margin-bottom: 8px;">📋</div>
              <h3 style="font-size: 1rem;">Nenhum pedido encontrado</h3>
              <p style="margin-top: 6px; font-size: 0.8rem;">Você ainda não fez nenhum pedido na loja de distribuição.</p>
            </div>
            
            <div id="lista-pedidos" style="display: none;">
              <!-- Pedidos serão carregados aqui -->
            </div>
          </div>
        </div>
      </section>
    </main>
    
    <footer>
      © 2025 J.P Sistemas. Todos os direitos reservados. | <a href="https://whatsa.me/5548996852138/?t=Ol%C3%A1,%20gostaria%20de%20mais%20informa%C3%A7%C3%B5es%20sobre%20os%20sistemas." target="_blank" style="color: #000000; text-decoration: underline;">jp-sistemas.com</a>
    </footer>

    <!-- Botão do carrinho flutuante -->
    <button class="btn-carrinho-flutuante" onclick="toggleCarrinho()">
      🛒
      <span class="carrinho-badge" id="carrinho-badge" style="display: none;">0</span>
    </button>

    <!-- Overlay -->
    <div class="overlay" id="overlay" onclick="toggleCarrinho()"></div>

    <!-- Modal de Imagem -->
    <div class="modal-imagem" id="modal-imagem" onclick="fecharModalImagem()">
      <div class="modal-conteudo" onclick="event.stopPropagation()">
        <span class="modal-fechar" onclick="fecharModalImagem()">&times;</span>
        <img id="modal-imagem-src" src="" alt="">
        <div class="modal-info" id="modal-info">
          <h3 id="modal-titulo"></h3>
          <p id="modal-descricao"></p>
          <p id="modal-referencia"></p>
          <p id="modal-categoria"></p>
          <p class="preco" id="modal-preco"></p>
        </div>
      </div>
    </div>

    <!-- Carrinho lateral -->
    <div class="carrinho-sidebar" id="carrinho-sidebar">
      <div class="carrinho-header">
        <h3>🛒 Seu Carrinho</h3>
        <button class="btn-fechar-carrinho" onclick="toggleCarrinho()">×</button>
      </div>
      
      <div class="carrinho-content" id="carrinho-content">
        <div id="carrinho-vazio" style="text-align: center; color: var(--text-muted); padding: 40px 20px;">
          <div style="font-size: 3rem; margin-bottom: 15px;">🛒</div>
          <p>Seu carrinho está vazio</p>
          <p style="font-size: 0.9rem; margin-top: 10px;">Adicione produtos para começar suas compras</p>
        </div>
      </div>
      
      <div class="carrinho-footer" id="carrinho-footer" style="display: none;">
        <div class="carrinho-total">
          <span>Total:</span>
          <span class="carrinho-total-valor" id="carrinho-total">R$ 0,00</span>
        </div>
        
        <div class="opcoes-pagamento">
          <div class="opcao-pagamento" onclick="selecionarPagamento('vista')">
            <input type="radio" name="pagamento" value="vista" id="pagamento-vista">
            <label for="pagamento-vista">
              <strong>À Vista</strong> - 5% de desconto
            </label>
          </div>
          <div class="opcao-pagamento" onclick="selecionarPagamento('prazo')">
            <input type="radio" name="pagamento" value="prazo" id="pagamento-prazo">
            <label for="pagamento-prazo">
              <strong>A Prazo</strong> - Preço normal
            </label>
          </div>
        </div>
        
        <div class="desconto-info" id="desconto-info" style="display: none;">
          <strong>💰 Desconto à vista aplicado!</strong><br>
          Você está economizando <span id="valor-desconto">R$ 0,00</span> com o pagamento à vista.
        </div>
        
        <button class="btn-finalizar" id="btn-finalizar" onclick="finalizarPedido()" disabled>
          Finalizar Pedido
        </button>
      </div>
    </div>

    <script>
      let clienteData = null;
      let carrinhoItens = [];
      let formaPagamento = null;

      // Verificar autenticação
      function checkAuth() {
        const clienteStr = localStorage.getItem('clienteDistribuicao');
        if (!clienteStr) {
          window.location.href = 'distribuicao.html';
          return false;
        }
        
        clienteData = JSON.parse(clienteStr);
        return true;
      }

      // Função de logout
      function logout() {
        localStorage.removeItem('clienteDistribuicao');
        localStorage.removeItem('savedCnpjDistribuicao');
        localStorage.removeItem('savedPasswordDistribuicao');
        window.location.href = 'distribuicao.html';
      }

      // Preencher informações do cliente
      function preencherInformacoesCliente() {
        if (!clienteData) return;
        document.getElementById('clienteNome').textContent = clienteData.razao;
      }

      // Produtos da loja de distribuição
      const produtosLoja = [
        // Conjuntos PVC
        {
          REFERENCIA: "2900",
          DESCRIÇÃO: "CONJUNTO PVC TORNADO COM GOLA E BOLSO",
          TAMANHOS: ["P", "M", "G", "GG", "EX"],
          TAMANHOS_ESPECIAIS: ["EX", "EXG", "2G", "3G"],
          PRECO: 85.00,
          PRECO_ESPECIAL: 97.50,
          CATEGORIA: "PVC",
          IMAGEM: "https://i.imgur.com/G5xYOB9.png"
        },
        {
          REFERENCIA: "2902",
          DESCRIÇÃO: "JAQUETA PVC TORNADO COM GOLA E BOLSO",
          TAMANHOS: ["P", "M", "G", "GG", "EX"],
          TAMANHOS_ESPECIAIS: ["EXG", "2G", "3G"],
          PRECO: 49.00,
          PRECO_ESPECIAL: 57.00,
          CATEGORIA: "PVC",
          IMAGEM: "https://i.imgur.com/bJUlUXo.png"
        },
        {
          REFERENCIA: "2904",
          DESCRIÇÃO: "CALÇA PVC TORNADO",
          TAMANHOS: ["P", "M", "G", "GG", "EX"],
          TAMANHOS_ESPECIAIS: ["EXG", "2G", "3G"],
          PRECO: 38.00,
          PRECO_ESPECIAL: 44.00,
          CATEGORIA: "PVC",
          IMAGEM: "https://i.imgur.com/aX66rhK.png"
        },
        {
          REFERENCIA: "3000",
          DESCRIÇÃO: "CONJUNTO PVC FEMININO COM GOLA - PRETO",
          TAMANHOS: ["P", "M", "G", "GG", "EX"],
          TAMANHOS_ESPECIAIS: ["EXG"],
          PRECO: 87.00,
          PRECO_ESPECIAL: 100.00,
          CATEGORIA: "Feminino",
          IMAGEM: "https://i.imgur.com/9NPau3y.png"
        },
        {
          REFERENCIA: "3000PT/RP",
          DESCRIÇÃO: "CONJUNTO PVC FEMININO COM GOLA - PRETO COM CORES",
          TAMANHOS: ["P", "M", "G", "GG", "EX"],
          TAMANHOS_ESPECIAIS: ["EXG"],
          PRECO: 91.00,
          PRECO_ESPECIAL: 105.00,
          CATEGORIA: "Feminino",
          IMAGEM: "https://i.imgur.com/HBFLazW.png"
        },
        {
          REFERENCIA: "2000",
          DESCRIÇÃO: "CONJUNTO PVC PREMIUM COM GOLA, BOLSO E REFLETIVO",
          TAMANHOS: ["P", "M", "G", "GG", "EX"],
          TAMANHOS_ESPECIAIS: ["EXG", "2G", "3G"],
          PRECO: 114.00,
          PRECO_ESPECIAL: 131.00,
          CATEGORIA: "Premium",
          IMAGEM: "https://i.imgur.com/4c2SWyG.png"
        },
        
        // Conjuntos Nylon
        {
          REFERENCIA: "1000",
          DESCRIÇÃO: "CONJUNTO NYLON C/GOLA",
          TAMANHOS: ["P", "M", "G", "GG", "EX"],
          TAMANHOS_ESPECIAIS: ["EXG"],
          PRECO: 156.00,
          PRECO_ESPECIAL: 180.00,
          CATEGORIA: "Nylon",
          IMAGEM: "https://i.imgur.com/8YzBKYU.png"
        },
        {
          REFERENCIA: "1002",
          DESCRIÇÃO: "JAQUELA DE NYLON C/GOLA",
          TAMANHOS: ["P", "M", "G", "GG", "EX"],
          TAMANHOS_ESPECIAIS: ["EXG"],
          PRECO: 92.00,
          PRECO_ESPECIAL: 105.00,
          CATEGORIA: "Nylon",
          IMAGEM: "https://i.imgur.com/XQnxANM.png"
        },
        {
          REFERENCIA: "1004",
          DESCRIÇÃO: "CALÇA NYLON",
          TAMANHOS: ["P", "M", "G", "GG", "EX"],
          TAMANHOS_ESPECIAIS: ["EXG"],
          PRECO: 59.00,
          PRECO_ESPECIAL: 68.00,
          CATEGORIA: "Nylon",
          IMAGEM: "https://i.imgur.com/O1Riu3k.png"
        },
        {
          REFERENCIA: "1100",
          DESCRIÇÃO: "CONJUNTO NYLON FEMININO COM GOLA",
          TAMANHOS: ["P", "M", "G", "GG", "EX"],
          TAMANHOS_ESPECIAIS: ["EXG"],
          PRECO: 151.00,
          PRECO_ESPECIAL: 174.00,
          CATEGORIA: "Feminino",
          IMAGEM: "https://i.imgur.com/17kE5JX.png"
        },
        {
          REFERENCIA: "1100PT/RP",
          DESCRIÇÃO: "CONJUNTO NYLON FEMININO COM GOLA ROSA",
          TAMANHOS: ["P", "M", "G", "GG", "EX"],
          TAMANHOS_ESPECIAIS: ["EXG"],
          PRECO: 156.00,
          PRECO_ESPECIAL: 180.00,
          CATEGORIA: "Feminino",
          IMAGEM: "https://i.imgur.com/W8NNt0V.png"
        },
        {
          REFERENCIA: "1200",
          DESCRIÇÃO: "CONJUNTO NYLON LUXO COM FORRO E GOLA",
          TAMANHOS: ["P", "M", "G", "GG", "EX"],
          TAMANHOS_ESPECIAIS: ["EXG"],
          PRECO: 184.00,
          PRECO_ESPECIAL: 212.00,
          CATEGORIA: "Luxo",
          IMAGEM: "https://i.imgur.com/PBe0ewa.png"
        },
        
        // Botas PVC
        {
          REFERENCIA: "360",
          DESCRIÇÃO: "BOTA DE PVC IMPERMEÁVEL - PRETA",
          TAMANHOS: ["35/36", "37/38", "39/40", "41/42", "43/44"],
          TAMANHOS_ESPECIAIS: [],
          PRECO: 84.00,
          PRECO_ESPECIAL: 84.00,
          CATEGORIA: "Calçados",
          IMAGEM: "https://i.imgur.com/rCySTtx.png"
        },
        {
          REFERENCIA: "360C/RS",
          DESCRIÇÃO: "BOTA DE PVC IMPERMEÁVEL - ROSA",
          TAMANHOS: ["35/36", "37/38", "39/40", "41/42", "43/44"],
          TAMANHOS_ESPECIAIS: [],
          PRECO: 92.00,
          PRECO_ESPECIAL: 92.00,
          CATEGORIA: "Calçados",
          IMAGEM: "https://i.imgur.com/zVkgVa8.png"
        },
        {
          REFERENCIA: "360C/AMF",
          DESCRIÇÃO: "BOTA DE PVC IMPERMEÁVEL - AMARELO",
          TAMANHOS: ["35/36", "37/38", "39/40", "41/42", "43/44"],
          TAMANHOS_ESPECIAIS: [],
          PRECO: 92.00,
          PRECO_ESPECIAL: 92.00,
          CATEGORIA: "Calçados",
          IMAGEM: "https://i.imgur.com/piGfHOW.png"
        },
        {
          REFERENCIA: "370",
          DESCRIÇÃO: "BOTA DE PVC IMPERMEÁVEL CANO MÉDIO",
          TAMANHOS: ["35/36", "37/38", "39/40", "41/42", "43/44", "45/46"],
          TAMANHOS_ESPECIAIS: [],
          PRECO: 91.00,
          PRECO_ESPECIAL: 91.00,
          CATEGORIA: "Calçados",
          IMAGEM: "https://i.imgur.com/bIOCG8I.png"
        },
        
        // Capas de Moto
        {
          REFERENCIA: "2410",
          DESCRIÇÃO: "CAPA DE MOTO PVC FORRADA COM FELTRO - P - ATÉ 125CC",
          TAMANHOS: ["P"],
          TAMANHOS_ESPECIAIS: [],
          PRECO: 117.00,
          PRECO_ESPECIAL: 117.00,
          CATEGORIA: "Motos",
          IMAGEM: "https://i.imgur.com/MQicg6i.png"
        },
        {
          REFERENCIA: "2411",
          DESCRIÇÃO: "CAPA DE MOTO PVC FORRADA COM FELTRO - M -125CC - 150CC",
          TAMANHOS: ["M"],
          TAMANHOS_ESPECIAIS: [],
          PRECO: 121.00,
          PRECO_ESPECIAL: 121.00,
          CATEGORIA: "Motos",
          IMAGEM: "https://i.imgur.com/MQicg6i.png"
        },
        {
          REFERENCIA: "2412",
          DESCRIÇÃO: "CAPA DE MOTO PVC FORRADA COM FELTRO - G - 250CC - 450CC",
          TAMANHOS: ["G"],
          TAMANHOS_ESPECIAIS: [],
          PRECO: 125.00,
          PRECO_ESPECIAL: 125.00,
          CATEGORIA: "Motos",
          IMAGEM: "https://i.imgur.com/MQicg6i.png"
        },
        {
          REFERENCIA: "2413",
          DESCRIÇÃO: "CAPA DE MOTO PVC FORRADA COM FELTRO - GG - 450CC - 500CC - 750CC",
          TAMANHOS: ["GG"],
          TAMANHOS_ESPECIAIS: [],
          PRECO: 132.00,
          PRECO_ESPECIAL: 132.00,
          CATEGORIA: "Motos",
          IMAGEM: "https://i.imgur.com/MQicg6i.png"
        },
        {
          REFERENCIA: "2414",
          DESCRIÇÃO: "CAPA DE MOTO PVC FORRADA COM FELTRO - EX - 750CC - 1200CC",
          TAMANHOS: ["EX"],
          TAMANHOS_ESPECIAIS: [],
          PRECO: 140.00,
          PRECO_ESPECIAL: 140.00,
          CATEGORIA: "Motos",
          IMAGEM: "https://i.imgur.com/MQicg6i.png"
        },
        {
          REFERENCIA: "2415",
          DESCRIÇÃO: "CAPA DE MOTO PVC FORRADA COM FELTRO - EXG - ACIMA 1200CC",
          TAMANHOS: ["EXG"],
          TAMANHOS_ESPECIAIS: [],
          PRECO: 170.00,
          PRECO_ESPECIAL: 170.00,
          CATEGORIA: "Motos",
          IMAGEM: "https://i.imgur.com/MQicg6i.png"
        }
      ];

      let produtosFiltrados = [...produtosLoja];

      // Renderizar produtos
      function renderizarProdutos() {
        const grid = document.getElementById('produtos-grid');
        const nenhumProduto = document.getElementById('nenhum-produto');
        
        if (produtosFiltrados.length === 0) {
          grid.innerHTML = '';
          nenhumProduto.style.display = 'block';
          return;
        }
        
        nenhumProduto.style.display = 'none';
        grid.innerHTML = '';

        produtosFiltrados.forEach(produto => {
          const card = document.createElement('div');
          card.className = 'produto-card';
          
           // Combinar tamanhos normais e especiais para exibição
           const todosTamanhos = [...produto.TAMANHOS, ...produto.TAMANHOS_ESPECIAIS];
           const tamanhosTexto = todosTamanhos.join(', ');
          
          let tamanhosHTML = `
            <div class="tamanhos-container">
              <label>Tamanhos & Quantidades:</label>
              <div class="tamanho-input-container">
                ${produto.TAMANHOS.map(tamanho => {
                  const tamanhoId = tamanho.replace(/[^a-zA-Z0-9]/g, "");
                  return `
                    <div>
                      <label for="quantidade-${produto.REFERENCIA}-${tamanhoId}">${tamanho}</label>
                      <input type="number" min="0" value="0" id="quantidade-${produto.REFERENCIA}-${tamanhoId}" data-preco="${produto.PRECO}">
                    </div>
                  `;
                }).join('')}
                ${produto.TAMANHOS_ESPECIAIS.map(tamanho => {
                  const tamanhoId = tamanho.replace(/[^a-zA-Z0-9]/g, "");
                  return `
                    <div style="border: 2px solid var(--warning-color); background: rgba(255, 193, 7, 0.1);">
                      <label for="quantidade-${produto.REFERENCIA}-${tamanhoId}" style="color: var(--warning-color); font-weight: 700;">${tamanho} ⬆️</label>
                      <input type="number" min="0" value="0" id="quantidade-${produto.REFERENCIA}-${tamanhoId}" data-preco="${produto.PRECO_ESPECIAL}">
                    </div>
                  `;
                }).join('')}
              </div>
            </div>
          `;

          card.innerHTML = `
            <div class="produto-imagem" onclick="abrirModalImagem('${produto.REFERENCIA}')">
              <img src="${produto.IMAGEM}" alt="${produto.DESCRIÇÃO}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;" onerror="this.style.display='none'; this.parentElement.innerHTML='📦';">
            </div>
            <div class="produto-categoria">${produto.CATEGORIA}</div>
            <div class="produto-ref">Ref: ${produto.REFERENCIA}</div>
            <div class="produto-descricao">${produto.DESCRIÇÃO}</div>
            <div class="produto-tamanhos">Tamanhos: ${tamanhosTexto}</div>
            <div class="produto-preco">R$ ${produto.PRECO.toFixed(2)}</div>
            ${tamanhosHTML}
            <button class="btn-adicionar" onclick="adicionarAoCarrinho('${produto.REFERENCIA}')">
              ➕ Adicionar ao Carrinho
            </button>
          `;

          grid.appendChild(card);
        });
        
        atualizarContadorProdutos();
      }

      // Alterar quantidade
      function alterarQuantidade(referencia, delta) {
        const input = document.getElementById(`qty-${referencia}`);
        const novaQuantidade = Math.max(0, parseInt(input.value) + delta);
        input.value = novaQuantidade;
        atualizarQuantidade(referencia);
      }

      // Atualizar quantidade
      function atualizarQuantidade(referencia) {
        const input = document.getElementById(`qty-${referencia}`);
        const quantidade = parseInt(input.value) || 0;
        
        // Se quantidade for 0, remover do carrinho se existir
        if (quantidade === 0) {
          removerDoCarrinho(referencia);
        }
      }

      // Adicionar ao carrinho (sistema atualizado)
      function adicionarAoCarrinho(referencia) {
        const produto = produtosLoja.find(p => p.REFERENCIA === referencia);
        if (!produto) return;

        let itemAdicionado = false;

        const handleItem = (tamanho, quantidade, preco) => {
          if (quantidade <= 0) return;
          
          itemAdicionado = true;
          const itemDesc = tamanho;
          const itemExistente = carrinhoItens.find(
            (item) =>
              item.REFERENCIA === produto.REFERENCIA &&
              item.tamanho === itemDesc &&
              item.preco === preco
          );

          if (itemExistente) {
            itemExistente.quantidade += quantidade;
          } else {
            carrinhoItens.push({
              REFERENCIA: produto.REFERENCIA,
              DESCRIÇÃO: produto.DESCRIÇÃO,
              tamanho: itemDesc,
              preco: preco,
              quantidade: quantidade,
              categoria: produto.CATEGORIA,
              imagem: produto.IMAGEM
            });
          }
        };

        // Processar tamanhos normais
        produto.TAMANHOS.forEach((tamanho) => {
          const tamanhoId = tamanho.replace(/[^a-zA-Z0-9]/g, "");
          const input = document.getElementById(`quantidade-${referencia}-${tamanhoId}`);
          if (input) {
            const quantidade = parseInt(input.value) || 0;
            const preco = parseFloat(input.dataset.preco) || produto.PRECO;
            handleItem(tamanho, quantidade, preco);
            
            // Limpar campo após adicionar
            if (quantidade > 0) {
              input.value = 0;
            }
          }
        });

        // Processar tamanhos especiais
        produto.TAMANHOS_ESPECIAIS.forEach((tamanho) => {
          const tamanhoId = tamanho.replace(/[^a-zA-Z0-9]/g, "");
          const input = document.getElementById(`quantidade-${referencia}-${tamanhoId}`);
          if (input) {
            const quantidade = parseInt(input.value) || 0;
            const preco = parseFloat(input.dataset.preco) || produto.PRECO_ESPECIAL;
            handleItem(tamanho, quantidade, preco);
            
            // Limpar campo após adicionar
            if (quantidade > 0) {
              input.value = 0;
            }
          }
        });

        if (itemAdicionado) {
          atualizarCarrinho();
          mostrarNotificacao(`${produto.DESCRIÇÃO} adicionado ao carrinho!`);
        } else {
          alert(`Por favor, informe a quantidade para pelo menos um tamanho do produto ${produto.DESCRIÇÃO}.`);
        }
      }

      // Remover do carrinho
      function removerDoCarrinho(referencia) {
        carrinhoItens = carrinhoItens.filter(item => item.REFERENCIA !== referencia);
        atualizarCarrinho();
      }

      // Atualizar quantidade no carrinho por índice
      function atualizarQuantidadeCarrinhoPorIndex(index, novaQuantidade) {
        if (novaQuantidade <= 0) {
          removerDoCarrinhoPorIndex(index);
          return;
        }
        
        if (carrinhoItens[index]) {
          carrinhoItens[index].quantidade = novaQuantidade;
          atualizarCarrinho();
        }
      }

      // Remover do carrinho por índice
      function removerDoCarrinhoPorIndex(index) {
        if (carrinhoItens[index]) {
          carrinhoItens.splice(index, 1);
          atualizarCarrinho();
        }
      }

      // Atualizar carrinho
      function atualizarCarrinho() {
        const content = document.getElementById('carrinho-content');
        const footer = document.getElementById('carrinho-footer');
        const badge = document.getElementById('carrinho-badge');
        const total = document.getElementById('carrinho-total');

        if (carrinhoItens.length === 0) {
          content.innerHTML = `
            <div id="carrinho-vazio" style="text-align: center; color: var(--text-muted); padding: 40px 20px;">
              <div style="font-size: 3rem; margin-bottom: 15px;">🛒</div>
              <p>Seu carrinho está vazio</p>
              <p style="font-size: 0.9rem; margin-top: 10px;">Adicione produtos para começar suas compras</p>
            </div>
          `;
          footer.style.display = 'none';
          badge.style.display = 'none';
          return;
        }

        // Renderizar itens do carrinho
        content.innerHTML = '';
          carrinhoItens.forEach((item, index) => {
            const itemDiv = document.createElement('div');
            itemDiv.className = 'carrinho-item';
            
            itemDiv.innerHTML = `
              <div class="carrinho-item-imagem">
                <img src="${item.imagem}" alt="${item.DESCRIÇÃO}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;" onerror="this.style.display='none'; this.parentElement.innerHTML='📦';">
              </div>
              <div class="carrinho-item-info">
                <div class="carrinho-item-nome">${item.DESCRIÇÃO}</div>
                <div class="carrinho-item-detalhes">Ref: ${item.REFERENCIA} | ${item.tamanho}</div>
                <div class="carrinho-item-preco">R$ ${(item.preco * item.quantidade).toFixed(2)}</div>
                <div class="carrinho-item-quantidade">
                  <button class="quantidade-btn" onclick="atualizarQuantidadeCarrinhoPorIndex(${index}, ${item.quantidade - 1})">-</button>
                  <input type="number" value="${item.quantidade}" min="1" onchange="atualizarQuantidadeCarrinhoPorIndex(${index}, parseInt(this.value))">
                  <button class="quantidade-btn" onclick="atualizarQuantidadeCarrinhoPorIndex(${index}, ${item.quantidade + 1})">+</button>
                  <button class="btn-remover-item" onclick="removerDoCarrinhoPorIndex(${index})">🗑️</button>
                </div>
              </div>
            `;
            
            content.appendChild(itemDiv);
          });

        // Calcular total
        const subtotal = carrinhoItens.reduce((total, item) => total + (item.preco * item.quantidade), 0);
        const desconto = formaPagamento === 'vista' ? subtotal * 0.05 : 0;
        const totalFinal = subtotal - desconto;

        total.textContent = `R$ ${totalFinal.toFixed(2)}`;
        badge.textContent = carrinhoItens.reduce((total, item) => total + item.quantidade, 0);
        badge.style.display = 'block';
        footer.style.display = 'block';

        // Atualizar info de desconto
        const descontoInfo = document.getElementById('desconto-info');
        const valorDesconto = document.getElementById('valor-desconto');
        
        if (formaPagamento === 'vista' && desconto > 0) {
          valorDesconto.textContent = `R$ ${desconto.toFixed(2)}`;
          descontoInfo.style.display = 'block';
        } else {
          descontoInfo.style.display = 'none';
        }

        // Habilitar/desabilitar botão finalizar
        const btnFinalizar = document.getElementById('btn-finalizar');
        btnFinalizar.disabled = carrinhoItens.length === 0;
      }

      // Selecionar forma de pagamento
      function selecionarPagamento(tipo) {
        formaPagamento = tipo;
        
        // Atualizar visual
        document.querySelectorAll('.opcao-pagamento').forEach(opcao => {
          opcao.classList.remove('selecionada');
        });
        
        const opcaoSelecionada = document.querySelector(`input[value="${tipo}"]`).closest('.opcao-pagamento');
        opcaoSelecionada.classList.add('selecionada');
        
        // Marcar radio button
        document.querySelector(`input[value="${tipo}"]`).checked = true;
        
        // Atualizar carrinho para recalcular total
        atualizarCarrinho();
      }

      // Toggle carrinho
      function toggleCarrinho() {
        const sidebar = document.getElementById('carrinho-sidebar');
        const overlay = document.getElementById('overlay');
        
        sidebar.classList.toggle('open');
        overlay.classList.toggle('show');
      }

      // Finalizar pedido
      async function finalizarPedido() {
        if (carrinhoItens.length === 0) {
          alert('Seu carrinho está vazio!');
          return;
        }

        if (!formaPagamento) {
          alert('Por favor, selecione uma forma de pagamento.');
          return;
        }

        try {
          // Calcular totais
          const subtotal = carrinhoItens.reduce((total, item) => total + (item.PRECO * item.quantidade), 0);
          const desconto = formaPagamento === 'vista' ? subtotal * 0.05 : 0;
          const totalFinal = subtotal - desconto;

          // Preparar dados do pedido
          const pedidoData = {
            empresa: 'distribuicao',
            descricao: `Pedido Distribuição - ${carrinhoItens.length} itens`,
            dados: {
              cliente: clienteData,
              itens: carrinhoItens,
              subtotal: subtotal,
              desconto: desconto,
              total: totalFinal,
              formaPagamento: formaPagamento,
              data: new Date().toISOString(),
              origem: 'Loja Distribuição',
              observacoes: `Pedido via Loja Distribuição - Pagamento ${formaPagamento === 'vista' ? 'à vista com 5% desconto' : 'a prazo'}`
            }
          };

          // Usar sistema offline
          const result = await window.offlineSystem.tryToSendOrder(pedidoData);
          
          if (result.success) {
            if (result.online) {
              alert('✅ Pedido enviado com sucesso! Você será redirecionado para seus pedidos.');
            } else {
              alert('📱 Sem conexão! Pedido salvo localmente e será enviado automaticamente quando a conexão retornar. Você será redirecionado para seus pedidos.');
            }
            
            // Limpar carrinho
            carrinhoItens = [];
            atualizarCarrinho();
            
            // Redirecionar para a página de pedidos
            window.location.href = 'pedidos.html';
          } else {
            throw new Error('Erro ao processar pedido');
          }
        } catch (error) {
          console.error('Erro ao finalizar pedido:', error);
          alert('Erro ao finalizar pedido. Tente novamente.');
        }
      }

      // Mostrar notificação
      function mostrarNotificacao(mensagem) {
        if (window.showNotification) {
          window.showNotification(mensagem, 'success');
        } else {
          alert(mensagem);
        }
      }

      // Carregar pedidos do cliente
      async function carregarPedidos() {
        const carregando = document.getElementById('carregando-pedidos');
        const nenhumPedido = document.getElementById('nenhum-pedido');
        const listaPedidos = document.getElementById('lista-pedidos');
        
        try {
          carregando.style.display = 'block';
          nenhumPedido.style.display = 'none';
          listaPedidos.style.display = 'none';
          
          // Buscar pedidos do cliente na API
          const response = await fetch('/api/pedidos');
          const pedidos = await response.json();
          
          // Filtrar apenas pedidos de distribuição do cliente atual
          const pedidosDistribuicao = pedidos.filter(pedido => {
            if (pedido.empresa !== 'distribuicao') return false;
            
            // Verificar se o pedido pertence ao cliente atual
            if (pedido.dados) {
              try {
                const dados = typeof pedido.dados === 'string' ? JSON.parse(pedido.dados) : pedido.dados;
                return dados.cliente && dados.cliente.cnpj === clienteData.cnpj;
              } catch (e) {
                return false;
              }
            }
            return false;
          });
          
          carregando.style.display = 'none';
          
          if (pedidosDistribuicao.length === 0) {
            nenhumPedido.style.display = 'block';
            return;
          }
          
          // Ordenar por data (mais recente primeiro)
          pedidosDistribuicao.sort((a, b) => new Date(b.data) - new Date(a.data));
          
          // Renderizar pedidos
          renderizarPedidos(pedidosDistribuicao);
          
        } catch (error) {
          console.error('Erro ao carregar pedidos:', error);
          carregando.style.display = 'none';
          nenhumPedido.style.display = 'block';
          nenhumPedido.innerHTML = `
            <div style="font-size: 3rem; margin-bottom: 15px;">❌</div>
            <h3>Erro ao carregar pedidos</h3>
            <p style="margin-top: 10px;">Não foi possível carregar seus pedidos. Tente novamente mais tarde.</p>
          `;
        }
      }

      // Renderizar lista de pedidos
      function renderizarPedidos(pedidos) {
        const listaPedidos = document.getElementById('lista-pedidos');
        const nenhumPedido = document.getElementById('nenhum-pedido');
        
        nenhumPedido.style.display = 'none';
        listaPedidos.style.display = 'block';
        listaPedidos.innerHTML = '';
        
        pedidos.forEach(pedido => {
          const card = document.createElement('div');
          card.className = 'pedido-card';
          
          // Parse dos dados do pedido
          let dados = {};
          try {
            dados = typeof pedido.dados === 'string' ? JSON.parse(pedido.dados) : pedido.dados;
          } catch (e) {
            dados = {};
          }
          
          // Determinar status do pedido
          let status = 'pendente';
          let statusText = 'Pendente';
          if (pedido.status === 'processando' || pedido.status === 'em_andamento') {
            status = 'processando';
            statusText = 'Processando';
          } else if (pedido.status === 'concluido' || pedido.status === 'finalizado') {
            status = 'concluido';
            statusText = 'Concluído';
          }
          
          // Formatar data
          const dataPedido = new Date(pedido.data);
          const dataFormatada = dataPedido.toLocaleDateString('pt-BR', {
            day: '2-digit',
            month: '2-digit',
            year: 'numeric',
            hour: '2-digit',
            minute: '2-digit'
          });
          
          // Renderizar itens do pedido
          let itensHTML = '';
          if (dados.itens && Array.isArray(dados.itens)) {
            itensHTML = dados.itens.map(item => `
              <div class="pedido-item">
                <div class="pedido-item-desc">
                  ${item.DESCRIÇÃO} - ${item.tamanho || 'N/A'}
                </div>
                <div class="pedido-item-qty">
                  Qty: ${item.quantidade}
                </div>
                <div class="pedido-item-preco">
                  R$ ${(item.preco * item.quantidade).toFixed(2)}
                </div>
              </div>
            `).join('');
          }
          
          card.innerHTML = `
            <div class="pedido-header">
              <div>
                <div class="pedido-id">Pedido #${pedido.id}</div>
                <div class="pedido-data">${dataFormatada}</div>
              </div>
              <div class="pedido-status ${status}">${statusText}</div>
            </div>
            
            <div class="pedido-itens">
              ${itensHTML}
            </div>
            
            <div class="pedido-info">
              <div class="pedido-info-item">
                <div class="pedido-info-label">Forma de Pagamento</div>
                <div class="pedido-info-value">${dados.formaPagamento === 'vista' ? 'À Vista' : 'A Prazo'}</div>
              </div>
              <div class="pedido-info-item">
                <div class="pedido-info-label">Desconto</div>
                <div class="pedido-info-value">${dados.desconto ? `R$ ${dados.desconto.toFixed(2)}` : 'R$ 0,00'}</div>
              </div>
            </div>
            
            <div class="pedido-total">
              Total: R$ ${dados.total ? dados.total.toFixed(2) : '0,00'}
            </div>
          `;
          
          listaPedidos.appendChild(card);
        });
      }

      // Inicializar página
      if (checkAuth()) {
        preencherInformacoesCliente();
        renderizarProdutos();
        atualizarCarrinho();
        carregarPedidos();
        
        // Adicionar event listeners para filtros
        document.getElementById('busca-produto').addEventListener('input', aplicarFiltros);
        document.getElementById('filtro-categoria').addEventListener('change', aplicarFiltros);
        document.getElementById('ordenar-por').addEventListener('change', aplicarFiltros);
      }

      // Sistema de filtros
      function aplicarFiltros() {
        const busca = document.getElementById('busca-produto').value.toLowerCase();
        const categoria = document.getElementById('filtro-categoria').value;
        const ordenarPor = document.getElementById('ordenar-por').value;

        produtosFiltrados = produtosLoja.filter(produto => {
          // Filtro de busca
          const matchBusca = !busca || 
            produto.REFERENCIA.toLowerCase().includes(busca) ||
            produto.DESCRIÇÃO.toLowerCase().includes(busca) ||
            produto.CATEGORIA.toLowerCase().includes(busca);

          // Filtro de categoria
          const matchCategoria = !categoria || produto.CATEGORIA === categoria;

          return matchBusca && matchCategoria;
        });

        // Aplicar ordenação
        produtosFiltrados.sort((a, b) => {
          switch (ordenarPor) {
            case 'referencia':
              return a.REFERENCIA.localeCompare(b.REFERENCIA);
            case 'nome':
              return a.DESCRIÇÃO.localeCompare(b.DESCRIÇÃO);
            case 'preco-asc':
              return a.PRECO - b.PRECO;
            case 'preco-desc':
              return b.PRECO - a.PRECO;
            case 'categoria':
              if (a.CATEGORIA !== b.CATEGORIA) {
                return a.CATEGORIA.localeCompare(b.CATEGORIA);
              }
              return a.REFERENCIA.localeCompare(b.REFERENCIA);
            default:
              return a.REFERENCIA.localeCompare(b.REFERENCIA);
          }
        });

        renderizarProdutos();
      }

      // Atualizar contador de produtos
      function atualizarContadorProdutos() {
        const contador = document.getElementById('contador-produtos');
        const total = produtosLoja.length;
        const filtrados = produtosFiltrados.length;
        
        if (filtrados === total) {
          contador.textContent = `Mostrando todos os ${total} produtos`;
        } else {
          contador.textContent = `Mostrando ${filtrados} de ${total} produtos`;
        }
      }

      // Limpar filtros
      function limparFiltros() {
        document.getElementById('busca-produto').value = '';
        document.getElementById('filtro-categoria').value = '';
        
        produtosFiltrados = [...produtosLoja];
        renderizarProdutos();
      }

      // Funções do modal de imagem
      function abrirModalImagem(referencia) {
        const produto = produtosLoja.find(p => p.REFERENCIA === referencia);
        if (!produto) return;

        const modal = document.getElementById('modal-imagem');
        const img = document.getElementById('modal-imagem-src');
        const titulo = document.getElementById('modal-titulo');
        const descricao = document.getElementById('modal-descricao');
        const ref = document.getElementById('modal-referencia');
        const categoria = document.getElementById('modal-categoria');
        const preco = document.getElementById('modal-preco');

        img.src = produto.IMAGEM;
        img.alt = produto.DESCRIÇÃO;
        titulo.textContent = produto.DESCRIÇÃO;
        descricao.textContent = `Referência: ${produto.REFERENCIA}`;
        ref.textContent = `Categoria: ${produto.CATEGORIA}`;
        categoria.textContent = `Tamanhos: ${[...produto.TAMANHOS, ...produto.TAMANHOS_ESPECIAIS].join(', ')}`;
        preco.textContent = `R$ ${produto.PRECO.toFixed(2)}`;

        modal.classList.add('show');
        document.body.style.overflow = 'hidden';
      }

      function fecharModalImagem() {
        const modal = document.getElementById('modal-imagem');
        modal.classList.remove('show');
        document.body.style.overflow = 'auto';
      }

      // Fechar modal com ESC
      document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
          fecharModalImagem();
        }
      });
    </script>
  </body>
</html>
